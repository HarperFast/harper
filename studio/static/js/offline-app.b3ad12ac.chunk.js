"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[156],{4198:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var r=a(7313),o=a(8467),n=a(9842),s=a(9266),i=a(511),l=a(7377),c=a(4220),d=a(6140),u=a(1337),p=a(3295),m=a(2190),_=a(6417);const v=(0,r.lazy)((()=>a.e(467).then(a.bind(a,2471)))),g=(0,r.lazy)((()=>Promise.all([a.e(409),a.e(896)]).then(a.bind(a,5920)))),h=(0,r.lazy)((()=>a.e(803).then(a.bind(a,2717))));const Z=function(){var e,t;const a=(0,o.s0)(),Z=(0,o.TH)(),[y,x]=(0,r.useState)(!0),[b,j]=(0,s.Z)({}),[w]=(0,m.Z)({});return(0,r.useEffect)((()=>{(0,p.Z)(null===b||void 0===b?void 0:b.theme)}),[null===b||void 0===b?void 0:b.theme]),(0,r.useEffect)((()=>{(0,u.Z)({currentPath:Z.pathname,navigate:a,persistedUser:b,setPersistedUser:j,setFetchingUser:x,instanceAuths:w,controller:undefined})}),[]),(0,_.jsxs)("div",{id:"local-studio",className:"".concat(b.theme),children:[(0,_.jsxs)("div",{id:"app-container",children:[(0,_.jsx)(r.Suspense,{fallback:(0,_.jsx)(l.Z,{header:" ",spinner:!0}),children:(0,_.jsx)(v,{loggedIn:null===w||void 0===w||null===(e=w.local)||void 0===e?void 0:e.valid})}),y?(0,_.jsx)(l.Z,{header:"signing in",spinner:!0}):null!==w&&void 0!==w&&null!==(t=w.local)&&void 0!==t&&t.valid?(0,_.jsx)(n.SV,{FallbackComponent:c.Z,children:(0,_.jsx)(r.Suspense,{fallback:(0,_.jsx)(l.Z,{header:" ",spinner:!0}),children:(0,_.jsxs)(o.Z5,{children:[(0,_.jsx)(o.AW,{element:(0,_.jsx)(g,{}),path:"/o/:customer_id/i/:compute_stack_id/*"}),(0,_.jsx)(o.AW,{element:(0,_.jsx)(o.Fg,{to:"/",replace:!0})})]})})}):(0,_.jsx)(n.SV,{FallbackComponent:d.Z,children:(0,_.jsx)(r.Suspense,{fallback:(0,_.jsx)(l.Z,{header:" ",spinner:!0}),children:(0,_.jsx)(o.Z5,{children:(0,_.jsx)(o.AW,{element:(0,_.jsx)(h,{}),path:"/"})})})})]}),(0,_.jsx)("div",{id:"app-bg-color"}),(0,_.jsxs)("div",{className:"version",children:["HarperDB Local Studio v",i.Z.studio_version]})]})}},4220:(e,t,a)=>{a.d(t,{Z:()=>c});a(7313);var r=a(238),o=a(3516),n=a(6782),s=a(5399),i=a(9327),l=a(6417);const c=function(e){let{error:t,componentStack:a,resetErrorBoundary:c,extraClass:d}=e;return(0,l.jsx)(r.Z,{className:"error-boundary mb-3 ".concat(d),children:(0,l.jsxs)(o.Z,{children:[(0,l.jsxs)("b",{children:["Component Error ",(new Date).toLocaleTimeString()]}),(0,l.jsx)("hr",{className:"my-1"}),(0,l.jsx)("div",{className:"error-message",children:t.message}),(0,l.jsx)("hr",{className:"my-1"}),(0,l.jsx)("div",{className:"stack-trace",children:(0,l.jsx)("pre",{children:a})}),(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(s.Z,{children:(0,l.jsx)(i.Z,{color:"danger",block:!0,href:"https://harperdbhelp.zendesk.com/hc/en-us/requests/new",target:"_blank",rel:"noopener noreferrer",children:"Create A Support Ticket"})}),(0,l.jsx)(s.Z,{children:(0,l.jsx)(i.Z,{color:"success",block:!0,onClick:c,children:"Retry Component Load"})})]})]})})}},6140:(e,t,a)=>{a.d(t,{Z:()=>i});a(7313);var r=a(2135),o=a(4220),n=a(511),s=a(6417);const i=function(e){let{error:t,componentStack:a,resetErrorBoundary:i}=e;return(0,s.jsxs)("div",{id:"login-form",children:[(0,s.jsx)("div",{id:"login-logo",title:"HarperDB Logo"}),(0,s.jsxs)("div",{className:"version",children:["Studio v",n.Z.studio_version]}),(0,s.jsx)(o.Z,{error:t,componentStack:a}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.OL,{to:"/",className:"login-nav-link",onClick:i,children:"Back to Login"})})]})}},7377:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(238),o=a(3516),n=a(6782),s=a(5399),i=(a(7313),a(2135)),l=a(6417);const c=function(e){let{header:t,body:a,spinner:c,links:d=!1,relative:u=!1}=e;return(0,l.jsxs)("div",{className:"loader ".concat(u?"relative":""),children:[(0,l.jsx)(r.Z,{className:"mb-3",children:(0,l.jsxs)(o.Z,{className:"text-center",children:[(0,l.jsxs)("div",{className:"mb-3",children:["\xa0",t,"\xa0"]}),(0,l.jsxs)("div",{className:"mt-2",children:["\xa0",c&&(0,l.jsx)("i",{className:"fa fa-spinner fa-spin"}),"\xa0"]}),(0,l.jsxs)("div",{className:"mt-2",children:["\xa0",a,"\xa0"]})]})}),d?(0,l.jsx)(n.Z,{children:d.map((e=>(0,l.jsx)(s.Z,{className:"login-nav-link-holder ".concat(e.className||""),children:(0,l.jsx)(i.OL,{to:e.to,className:"login-nav-link",children:e.text})},e.to)))}):(0,l.jsx)("div",{className:"login-nav-link",children:"\xa0"})]})}},2261:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(8093),o=a(511);const n=async e=>{let{type:t="studio component",status:a="warn",url:n,operation:s,request:i,error:l,customer_id:c,compute_stack_id:d}=e,u=!1;try{var p;u=JSON.parse(localStorage.getItem("persistedUser"));const e={type:t,status:"studio component"===t?"warn":a,environment:o.Z.env,user:(null===(p=u)||void 0===p?void 0:p.email)||"unknown",customer_id:c,compute_stack_id:d,url:n,operation:s,request:{...i,password:null!==i&&void 0!==i&&i.password?"xxxxxxxxx":void 0},error:l,timestamp:Date.now()},m=await(0,r.he)("".concat(o.Z.lms_api_url,"addError"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",authorization:void 0}}),_=await m.json();(_.body||_).error||console.log("Reported ",o.Z.env,e.status,t,s)}catch(m){console.log(m)}}},6005:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(6449),o=a(2261),n=a(511);const s=async()=>{let e=null;try{e=[{value:"ap-west",label:"Mumbai, IN",country:"in"},{value:"ca-central",label:"Toronto, CA",country:"ca"},{value:"ap-southeast",label:"Sydney, AU",country:"au"},{value:"us-central",label:"Dallas, TX",country:"us"},{value:"us-west",label:"Fremont, CA",country:"us"},{value:"us-southeast",label:"Atlanta, GA",country:"us"},{value:"us-east",label:"Newark, NJ",country:"us"},{value:"eu-west",label:"London, UK",country:"uk"},{value:"ap-south",label:"Singapore, SG",country:"sg"},{value:"eu-central",label:"Frankfurt, DE",country:"de"},{value:"ap-northeast",label:"Tokyo, JP",country:"jp"}].sort(((e,t)=>e.label<t.label?-1:1));let t=[];return Array.isArray(e)&&(t=e),r.Z.update((e=>{e.akamaiRegions=t}))}catch(t){return(0,o.Z)({type:"lms data",status:"error",url:n.Z.lms_api_url,operation:"getAkamaiRegions",error:{catch:t.toString()}})}}},1007:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(576),o=a(6449),n=a(511),s=a(2261);const i=async()=>{let e=null;try{return e=await(0,r.Z)({endpoint:"getCurrentVersion",method:"POST"}),e.number?(e.studio||(e.studio=n.Z.studio_version),o.Z.update((t=>{t.version=e}))):!1}catch(t){return(0,s.Z)({type:"lms data",status:"error",url:n.Z.lms_api_url,operation:"getCurrentVersion",error:{catch:t.toString()}})}}},2227:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(576),o=a(6449),n=a(2261),s=a(8329),i=a(9274),l=a(511);const c={dev:{cloud_compute:"prod_Gh1XXQx6J8YaJl",local_compute:"prod_GoB3yLzygPeGMu",wavelength_compute:"prod_KloxOQofDaLs7q",akamai_compute:"prod_O2DOH61yn3qP6g",cloud_storage:"prod_GoUJnVwOYvTjU9"},stage:{cloud_compute:"prod_Gh1XXQx6J8YaJl",local_compute:"prod_GoB3yLzygPeGMu",wavelength_compute:"prod_KloxOQofDaLs7q",akamai_compute:"prod_O2DOH61yn3qP6g",cloud_storage:"prod_GoUJnVwOYvTjU9"},prod:{cloud_compute:"prod_GdDIHGH6lzEqgv",local_compute:"prod_H0Xx9dKkQqhMx9",wavelength_compute:"prod_KlorPRd9r1RKcz",akamai_compute:"prod_O7j9wiS1g7kPZU",cloud_storage:"prod_H0XnsrToBa7a7G"}},d=async()=>{try{const e=await(0,r.Z)({endpoint:"getProducts",method:"POST"});return!e.error&&o.Z.update((t=>{var a,r,o,n,d;t.products={cloud_storage:(0,i.Z)((null===(a=e.find((e=>e.id===c[l.Z.env].cloud_storage)))||void 0===a?void 0:a.plans.filter((e=>!e.metadata.prepaid)))||[]),cloud_compute:(0,s.Z)((null===(r=e.find((e=>e.id===c[l.Z.env].cloud_compute)))||void 0===r?void 0:r.plans.filter((e=>!e.metadata.prepaid)))||[]),wavelength_compute:(0,s.Z)((null===(o=e.find((e=>e.id===c[l.Z.env].wavelength_compute)))||void 0===o?void 0:o.plans.filter((e=>!e.metadata.prepaid)))||[]),akamai_compute:(0,s.Z)((null===(n=e.find((e=>e.id===c[l.Z.env].akamai_compute)))||void 0===n?void 0:n.plans.filter((e=>!e.metadata.prepaid)))||[]),local_compute:(0,s.Z)((null===(d=e.find((e=>e.id===c[l.Z.env].local_compute)))||void 0===d?void 0:d.plans.filter((e=>!e.metadata.prepaid)))||[])}}))}catch(e){return(0,n.Z)({type:"lms data",status:"error",url:l.Z.lms_api_url,operation:"getProducts",error:{catch:e.toString()}})}}},2982:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(576),o=a(6449),n=a(2261),s=a(511);const i=async()=>{let e=null;try{e=await(0,r.Z)({endpoint:"getRegions",method:"POST"});let t=[];return Array.isArray(e)&&(t=e),o.Z.update((e=>{e.regions=t}))}catch(t){return(0,n.Z)({type:"lms data",status:"error",url:s.Z.lms_api_url,operation:"getRegions",error:{catch:t.toString()}})}}},6345:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(576),o=a(6449),n=a(2261),s=a(511);const i=async e=>{let{email:t,pass:a,loggingIn:i=!1,signal:l}=e,c=null;try{return c=await(0,r.Z)({endpoint:"getUser",method:"POST",signal:l,payload:{email:t,password:a,loggingIn:i}}),c.error&&i?o.Z.update((e=>{e.auth={...c,time:Date.now()}})):!c.error&&(c.orgs?Array.isArray(c.orgs)||(c.orgs=[c.orgs]):c.orgs=[{customer_id:c.customer_id.toString(),customer_name:"".concat(c.firstname,"'s Org"),status:"owner"}],o.Z.update((e=>{e.auth={email:t,pass:a,...c}})))}catch(d){return i||(0,n.Z)({type:"lms data",status:"error",url:s.Z.lms_api_url,operation:"getUser",error:{catch:d.message}}),o.Z.update((e=>{e.auth={error:!0,message:d.message,time:Date.now()}}))}}},9476:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(576),o=a(6449),n=a(2261),s=a(511);const i=async()=>{let e=null;try{e=await(0,r.Z)({endpoint:"wl/getWavelengthRegions",method:"POST"});let t=[];return Array.isArray(e)&&(t=e.map((e=>({label:"".concat(e.communications_service_provider.replace(/(^\w{1})|(\s+\w{1})/g,(e=>e.toUpperCase()))," / ").concat(e.location.replace(/(^\w{1})|(\s+\w{1})/g,(e=>e.toUpperCase()))),value:e.wavelength_zone_id})))),o.Z.update((e=>{e.wavelengthRegions=t}))}catch(t){return(0,n.Z)({type:"lms data",status:"error",url:s.Z.lms_api_url,operation:"getWavelengthRegions",error:{catch:t.toString()}})}}},576:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(8093),o=a(511),n=a(2261);const s=async e=>{let{endpoint:t,payload:a,auth:s,signal:i}=e;const l={type:"lms api",status:"error",url:o.Z.lms_api_url,operation:t,request:a,customer_id:null===a||void 0===a?void 0:a.customer_id,compute_stack_id:null===a||void 0===a?void 0:a.compute_stack_id};try{const e=await(0,r.he)("".concat(o.Z.lms_api_url).concat(t),{signal:i,method:"POST",body:JSON.stringify(a),headers:null!==s&&void 0!==s&&s.email&&null!==s&&void 0!==s&&s.pass?{"Content-Type":"application/json",authorization:"Basic ".concat(btoa("".concat(s.email,":").concat(s.pass)))}:{"Content-Type":"application/json"}}),c=await e.json(),d=c.body||c;return d.errorType?((0,n.Z)({...l,status:"warn",error:d}),{error:!0,message:d.errorMessage}):d.error||"Internal server error"===d.message?(a.loggingIn||(0,n.Z)({...l,error:d}),{error:!0,message:d.message.replace(/Validation error:|Throttling error:|Bad request:|Internal Server Error:|Unauthorized:|StripeInvalidRequestError:|TypeError:/g,"").trim()||"The server did not respond"}):d}catch(c){return["Aborted","Network request failed"].includes(c.message)||"TypeError: Network request failed"===c||(0,n.Z)({...l,error:{catch:c.message}}),{error:!0,message:c.message}}}},3295:(e,t,a)=>{a.d(t,{Z:()=>r});const r=e=>{document.getElementById("dynamic-favicon").href="/images/favicon_".concat(e||"purple",".png")}},1337:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(1007),o=a(2227),n=a(2982),s=a(9476),i=a(6005),l=a(6449),c=a(8149),d=a(511);const u=e=>{var t;let{currentPath:a,navigate:u,setFetchingUser:p,persistedUser:m,setPersistedUser:_,instanceAuths:v,controller:g}=e;return(e=>{const t=window.location.host.indexOf("lumen")>=0,a=window.location.host.indexOf("verizon")>=0,r=window.location.host.indexOf("akamai")>=0,o=t?["lumen"]:a?["verizon"]:r?["akamai"]:["purple","light","dark"];l.Z.update((n=>{n.theme=1===o.length?o[0]:o.indexOf(e)>=0?e:"dark",n.themes=o,n.is_lumen=t,n.is_verizon=a,n.is_akamai=r}))})(m.theme),d.Z.is_local_studio?(l.Z.update((e=>{e.instances=[{compute_stack_id:"local",url:d.Z.local_studio_dev_url||"/",instance_name:"local"}]})),p(!1),null!==v&&void 0!==v&&null!==(t=v.local)&&void 0!==t&&t.valid?(p(!1),setTimeout(u("/o/local/i/local/browse"),10)):u("/")):["/sign-up","/reset-password","/resend-registration-email"].includes(a)?(p(!1),_({})):["/sign-in"].includes(a)?u("/"):(null!==m&&void 0!==m&&m.email?(0,c.Z)({auth:m,controller:g,setFetchingUser:p,loggingIn:!0}):p(!1),(0,r.Z)(),(0,o.Z)(),(0,n.Z)(),(0,s.Z)(),(0,i.Z)(),l.Z.update((e=>{e.auth={email:null===m||void 0===m?void 0:m.email,pass:null===m||void 0===m?void 0:m.pass}})))}},8149:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(6345);const o=async e=>{let{auth:t,loggingIn:a=!1,controller:o,setFetchingUser:n=!1}=e;null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.pass&&(o=new AbortController,n&&n(!0),await(0,r.Z)({...t,loggingIn:a,signal:o.signal}),n&&n(!1))}},8329:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(1842);const o=e=>{const t=[];return e.map((e=>{let{id:a,amount_decimal:o,interval:n,amount:s,active:i,subscription_id:l,name:c,quantity:d,available:u,trial_period_days:p=null,metadata:{ram_allocation:m,instance_type:_,has_gpus:v}}=e;const g=l?0:parseInt(o,10)/100,h=(0,r.Z)(s),Z=l?c:"0"===o?"FREE":"".concat(h),y=l?c:"0"===o?"FREE":"".concat(h,"/").concat(n),x=!!m&&parseInt(m,10),b="".concat(x/1024,"GB"),j="".concat(b," RAM  ").concat(v?"+ GPU Support ":"","\u2022  ").concat(l?"".concat(c,"  \u2022  ").concat(u," remaining"):"0"!==o?"".concat(h,"/").concat(n):"FREE"," ").concat(i?"":"(legacy)"," ").concat(p?"\u2022 ".concat(p," DAY FREE TRIAL"):"");return x&&t.push({label:j,value:{active:i,instance_type:_,trial_period_days:p,stripe_plan_id:a,compute_interval:n,compute_subscription_name:c,compute_subscription_id:l,compute_quantity:d,compute_quantity_available:u,compute_ram:x,compute_ram_string:b,compute_price:g,compute_comma_amount:h,compute_price_string:Z,compute_price_string_with_interval:y}})})),t.sort(((e,t)=>e.value.compute_ram===t.value.compute_ram?e.value.compute_subscription_name>t.value.compute_subscription_name?1:-1:e.value.compute_ram-t.value.compute_ram))}},9274:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(1842);const o=e=>{const t=[];return e.map((e=>{let{tiers:a,interval:o,active:n,id:s,subscription_id:i,name:l,available:c}=e;const d=a.find((e=>!!e.up_to)).up_to;return[...new Set([d,10,100,250,500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4])].filter((e=>!i||e!==d)).map((e=>{const d=a.find((t=>t.up_to&&e<=t.up_to||!t.up_to)),u=i?0:e*(d.unit_amount/100),p=i?l:u?"$".concat((0,r.Z)(u.toFixed(2))):"FREE",m=i?l:u?"$".concat((0,r.Z)(u.toFixed(2)),"/").concat(o):"FREE",_=e>=1e3?"".concat(e/1e3,"TB"):"".concat(e,"GB"),v=c?c>1e3?"".concat((c/1024).toFixed(2),"TB"):"".concat(c,"GB"):0,g="".concat(_,"  \u2022  ").concat(i?"".concat(l,"  \u2022  ").concat(v," remaining"):u?"$".concat((0,r.Z)(u.toFixed(2)),"/").concat(o):"FREE"," ").concat(n?"":"(legacy)");return t.push({label:g,value:{active:n,data_volume_size:e,iops:3e3,storage_interval:o,stripe_storage_plan_id:s,storage_subscription_id:i,storage_subscription_name:l,storage_quantity_available:c,storage_price:u,storage_price_string:p,storage_price_string_with_interval:m,data_volume_size_string:_}})}))})),t.sort(((e,t)=>e.value.data_volume_size===t.value.data_volume_size?e.value.storage_subscription_name>t.value.storage_subscription_name?1:-1:e.value.data_volume_size-t.value.data_volume_size))}},6449:(e,t,a)=>{a.d(t,{Z:()=>r});const r=new(a(7387).yh)({auth:!1,customer:!1,users:!1,products:!1,regions:!1,integrations:!1,subscriptions:!1,instances:!1,alarms:!1,alarmsError:!1,hasCard:!1,lastUpdate:!1,orgSearch:"",filterSearch:"",filterLocal:!0,filterCloud:!0,version:!1,theme:"dark",postmanCollection:!1})},2190:(e,t,a)=>{a.d(t,{Z:()=>r});const r=(0,a(8131).Z)("instanceAuths")},9266:(e,t,a)=>{a.d(t,{Z:()=>r});const r=(0,a(8131).Z)("persistedUser")},1842:(e,t,a)=>{a.d(t,{Z:()=>r});const r=e=>e&&e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}]);