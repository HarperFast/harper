"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[845],{7875:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var r=t(7313),a=t(8467),n=t(6417);const o=(0,r.lazy)((()=>Promise.all([t.e(409),t.e(845)]).then(t.bind(t,6043)))),l=[{element:(0,n.jsx)(o,{}),path:"",link:"profile",label:"profile",icon:"user",iconCode:"f007"}];var i=t(187),c=t(7377);const d=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)(c.Z,{header:" ",spinner:!0}),children:(0,n.jsxs)(a.Z5,{children:[l.map((e=>(0,n.jsx)(a.AW,{path:e.path,element:e.element},e.path))),(0,n.jsx)(a.AW,{path:"*",element:(0,n.jsx)(a.Fg,{to:"/profile",replace:!0})},"*")]})})]})}},6043:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var r=t(7313),a=t(6782),n=t(5399),o=t(238),l=t(3516),i=t(1781),c=t(9327),d=t(7387),u=t(9842),p=t(6449),m=t(576),h=t(2261),f=t(511),x=t(6345);var b=t(1891),g=t(4220),j=t(3263),v=t(6417);const y=function(){const e=(0,d.Kw)(p.Z,(e=>e.auth)),[s,t]=(0,r.useState)({}),[y,w]=(0,r.useState)(e),Z="314px";return(0,r.useEffect)((()=>{let s=!0;return s&&null!==e&&void 0!==e&&e.profileError?t({error:e.message}):s&&null!==e&&void 0!==e&&e.profileSuccess&&t({success:e.message}),()=>{s=!1}}),[e.profileError,e.profileSuccess]),(0,r.useEffect)((()=>{let e=!0;return(s.error||s.success)&&setTimeout((()=>{e&&t({})}),2e3),()=>{e=!1}}),[s.error,s.success]),(0,v.jsx)(u.SV,{onError:(e,s)=>(0,h.Z)({error:{message:e.message,componentStack:s}}),FallbackComponent:g.Z,children:(0,v.jsx)("div",{className:"my-3",children:s.processing?(0,v.jsx)(b.Z,{height:Z,status:"processing",header:"Updating Profile",subhead:"The Profile Poodle is doing his thing."}):s.success?(0,v.jsx)(b.Z,{height:Z,status:"success",header:"Success!",subhead:s.success}):s.error?(0,v.jsx)(b.Z,{height:Z,status:"error",header:s.error,subhead:"Please try again"}):(0,v.jsx)(o.Z,{className:"mb-3",children:(0,v.jsxs)(l.Z,{children:[(0,v.jsxs)(a.Z,{children:[(0,v.jsx)(n.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:null===e||void 0===e||!e.email_bounced||null!==e&&void 0!==e&&e.profileSuccess?(0,v.jsx)("span",{children:e.email}):(0,v.jsx)("span",{className:"text-danger",children:"please provide a valid email address"})}),(0,v.jsx)(n.Z,{md:"6",xs:"12",children:(0,v.jsx)(i.Z,{id:"email",type:"text",className:"mb-0 text-center ".concat(null===e||void 0===e||!e.email_bounced||null!==e&&void 0!==e&&e.profileSuccess?"":"error"),name:"email",placeholder:"email address",onChange:e=>w({...y,email:e.target.value}),value:y.email||"",disabled:s.submitted})}),(0,v.jsx)(n.Z,{xs:"12",children:(0,v.jsx)("hr",{className:"my-2"})}),(0,v.jsx)(n.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"first name"}),(0,v.jsx)(n.Z,{md:"6",xs:"12",children:(0,v.jsx)(i.Z,{id:"firstname",type:"text",className:"mb-0 text-center",name:"fname",placeholder:"first name",onChange:e=>w({...y,firstname:e.target.value}),value:y.firstname||"",disabled:s.submitted})}),(0,v.jsx)(n.Z,{xs:"12",children:(0,v.jsx)("hr",{className:"my-2"})}),(0,v.jsx)(n.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"last name"}),(0,v.jsx)(n.Z,{md:"6",xs:"12",children:(0,v.jsx)(i.Z,{id:"lastname",type:"text",className:"mb-0 text-center",name:"lname",placeholder:"last name",onChange:e=>w({...y,lastname:e.target.value}),value:y.lastname||"",disabled:s.submitted})}),(0,v.jsx)(n.Z,{xs:"12",children:(0,v.jsx)("hr",{className:"my-2"})}),(0,v.jsx)(n.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"github repo"}),(0,v.jsx)(n.Z,{md:"6",xs:"12",children:(0,v.jsx)(i.Z,{id:"github_repo",type:"text",className:"mb-0 text-center",name:"github_repo",placeholder:"github repo",onChange:e=>w({...y,github_repo:e.target.value}),value:y.github_repo||"",disabled:s.submitted})})]}),(0,v.jsx)("hr",{className:"mt-2 mb-4"}),(0,v.jsx)(c.Z,{id:"saveProfile",color:"purple",block:!0,onClick:()=>{t({submitted:!0});const{firstname:s,lastname:r,github_repo:a,email:n}=y;s&&r&&n?a&&!(0,j.Z)(a)?t({error:"github repo must be a valid URL"}):e.firstname===s&&e.lastname===r&&e.github_repo===a&&e.email===n?t({error:"Nothing seems to have changed"}):(t({processing:!0}),(async e=>{let{auth:s,firstname:t,lastname:r,customer_id:a,user_id:n,github_repo:o,email:l}=e,i=null;try{return i=await(0,m.Z)({endpoint:"updateUser",method:"POST",payload:{firstname:t,lastname:r,customer_id:a,user_id:n,github_repo:o,email:l},auth:s}),i.error?p.Z.update((e=>{e.auth={...s,...i,profileError:Date.now()}})):(p.Z.update((e=>{e.auth={...s,profileSuccess:Date.now(),...i}})),(0,x.Z)({email:l,pass:s.pass,loggingIn:!0}))}catch(c){return(0,h.Z)({type:"lms data",status:"error",url:f.Z.lms_api_url,operation:"updateUser",request:{firstname:t,lastname:r,customer_id:a,user_id:n,github_repo:o},error:{catch:c.toString()},customer_id:a})}})({auth:e,firstname:s,lastname:r,user_id:e.user_id,github_repo:a,email:n})):t({error:"All fields are required"})},disabled:s.submitted,children:"Save Profile"})]})})})})};var w=t(9395);const Z=function(){const e=(0,d.Kw)(p.Z,(e=>e.auth)),[s,t]=(0,r.useState)({}),[m,f]=(0,r.useState)({}),x="259px";return(0,r.useEffect)((()=>{null!==e&&void 0!==e&&e.passwordError?t({error:e.message}):null!==e&&void 0!==e&&e.passwordSuccess&&t({success:e.message})}),[e.passwordError,e.passwordSuccess]),(0,r.useEffect)((()=>{let e=!0;return(s.error||s.success)&&setTimeout((()=>{e&&t({})}),2e3),()=>{e=!1}}),[s.error,s.success]),(0,v.jsx)(u.SV,{onError:(e,s)=>(0,h.Z)({error:{message:e.message,componentStack:s}}),FallbackComponent:g.Z,children:(0,v.jsx)("div",{className:"my-3",children:s.processing?(0,v.jsx)(b.Z,{height:x,status:"processing",header:"Updating Password",subhead:"The Security Shepherd is mad-hashing."}):s.success?(0,v.jsx)(b.Z,{height:x,status:"success",header:"Success!",subhead:s.success}):s.error?(0,v.jsx)(b.Z,{height:x,status:"error",header:s.error,subhead:"Please try again"}):(0,v.jsx)(o.Z,{children:(0,v.jsxs)(l.Z,{children:[(0,v.jsxs)(a.Z,{children:[(0,v.jsx)(n.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"current password"}),(0,v.jsx)(n.Z,{md:"6",xs:"12",children:(0,v.jsx)(i.Z,{id:"oldpassword",type:"password",className:"mb-0 text-center",name:"current password",placeholder:"current password",onChange:e=>f({...m,oldpassword:e.target.value}),value:m.oldpassword||"",disabled:s.submitted})}),(0,v.jsx)(n.Z,{xs:"12",children:(0,v.jsx)("hr",{className:"my-2"})}),(0,v.jsx)(n.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"new password"}),(0,v.jsx)(n.Z,{md:"6",xs:"12",children:(0,v.jsx)(i.Z,{id:"newpassword1",type:"password",className:"mb-0 text-center",name:"new password",placeholder:"new password",onChange:e=>f({...m,newpassword:e.target.value}),value:m.newpassword||"",disabled:s.submitted})}),(0,v.jsx)(n.Z,{xs:"12",children:(0,v.jsx)("hr",{className:"my-2"})}),(0,v.jsx)(n.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"verify password"}),(0,v.jsx)(n.Z,{md:"6",xs:"12",children:(0,v.jsx)(i.Z,{id:"newpassword2",type:"password",className:"mb-0 text-center",name:"verify password",placeholder:"verify password",onChange:e=>f({...m,newpassword2:e.target.value}),value:m.newpassword2||"",disabled:s.submitted})})]}),(0,v.jsx)("hr",{className:"mt-2 mb-4"}),(0,v.jsx)(c.Z,{id:"updatePassword",color:"purple",block:!0,onClick:()=>{t({submitted:!0});const{oldpassword:s,newpassword:r,newpassword2:a}=m;s!==e.pass?t({error:"old password is incorrect"}):r!==a?t({error:"new passwords do not match"}):s&&r&&a?(t({processing:!0}),(0,w.Z)({auth:e,user_id:e.user_id,password:r})):t({error:"all fields are required"})},disabled:s.submitted,children:"Update Password"})]})})})})};const N=function(){return(0,v.jsxs)(a.Z,{children:[(0,v.jsxs)(n.Z,{md:"6",className:"mb-4",children:[(0,v.jsx)("span",{className:"floating-card-header",children:"profile"}),(0,v.jsx)(y,{})]}),(0,v.jsxs)(n.Z,{md:"6",className:"mb-4",children:[(0,v.jsx)("span",{className:"floating-card-header",children:"password"}),(0,v.jsx)(Z,{})]})]})}},1891:(e,s,t)=>{t.d(s,{Z:()=>o});t(7313);var r=t(238),a=t(3516),n=t(6417);const o=function(e){let{header:s,subhead:t=" ",height:o,status:l,className:i}=e;return(0,n.jsx)(r.Z,{className:"form-status ".concat(i),children:(0,n.jsxs)(a.Z,{className:"text-center",style:{height:o},children:[(0,n.jsx)("div",{className:"text-bold",children:s}),(0,n.jsx)("div",{className:"py-4",children:(0,n.jsx)("i",{className:"fa fa-lg ".concat("processing"===l?"fa-spinner fa-spin text-purple":"success"===l?"fa-check-circle text-purple":"fa-exclamation-triangle text-danger")})}),(0,n.jsx)("div",{className:"text-grey",children:t})]})})}},187:(e,s,t)=>{t.d(s,{Z:()=>m});t(7313);var r=t(5708),a=t(2742),n=t(1613),o=t(8212),l=t(8467),i=t(2135),c=t(9842),d=t(4220),u=t(2261),p=t(6417);const m=function(e){let{routes:s=[]}=e;const t=(0,l.s0)(),m=(0,l.TH)(),h=(null===s||void 0===s?void 0:s.find((e=>e.link===m.pathname)))||s[0];return(0,p.jsx)(c.SV,{onError:(e,s)=>(0,u.Z)({error:{message:e.message,componentStack:s}}),FallbackComponent:d.Z,children:(0,p.jsx)(r.Z,{className:"app-subnav",children:h&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Z,{navbar:!0,className:"instance-nav d-none d-md-flex",children:s.map((e=>e.external?(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsxs)("a",{className:"nav-link",href:e.url,target:"_blank",rel:"noreferrer",children:[(0,p.jsx)("i",{className:"d-none d-sm-inline-block fa me-1 fa-".concat(e.icon)}),e.label]})},e.path):(0,p.jsx)(n.Z,{children:(0,p.jsxs)(i.OL,{title:e.link,className:"nav-link",to:e.link||e.path,children:[(0,p.jsx)("i",{className:"d-none d-sm-inline-block fa me-1 fa-".concat(e.icon)}),e.label]})},e.path)))}),(0,p.jsx)(a.Z,{navbar:!0,className:"d-flex d-md-none",children:(0,p.jsx)(o.ZP,{className:"react-select-container",classNamePrefix:"react-select",width:"200px",onChange:e=>{let{value:s}=e;return t(s)},options:s.filter((e=>e.link!==h.link)).map((e=>({label:(0,p.jsxs)("span",{children:[(0,p.jsx)("i",{className:"d-none d-sm-inline-block fa me-1 fa-".concat(e.icon)}),e.label]}),value:e.link,iconCode:e.iconCode}))),value:{...h,value:null===h||void 0===h?void 0:h.link},defaultValue:null===h||void 0===h?void 0:h.link,isSearchable:!1,isClearable:!1})})]})})})}},9395:(e,s,t)=>{t.d(s,{Z:()=>l});var r=t(576),a=t(6449),n=t(2261),o=t(511);const l=async e=>{let{auth:s,user_id:t,password:l}=e,i=null;try{return i=await(0,r.Z)({endpoint:"updatePassword",method:"POST",payload:{user_id:t,password:l,loggingIn:!0},auth:s}),i.error?a.Z.update((e=>{e.auth={...s,...i,passwordError:Date.now()}})):a.Z.update((e=>{e.auth={...s,passwordSuccess:Date.now(),update_password:!1,...i,pass:l}}))}catch(c){return(0,n.Z)({type:"lms data",status:"error",url:o.Z.lms_api_url,operation:"updatePassword",request:{user_id:t},error:{catch:c.toString()}})}}},3263:(e,s,t)=>{t.d(s,{Z:()=>r});const r=e=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},1781:(e,s,t)=>{t.d(s,{Z:()=>v});var r=t(7313),a=t(5192),n=t.n(a),o=t(6123),l=t.n(o),i=t(986);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var d=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u.apply(this,arguments)}function p(e,s){if(null==e)return{};var t,r,a=function(e,s){if(null==e)return{};var t,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)t=n[r],s.indexOf(t)>=0||(a[t]=e[t]);return a}(e,s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)t=n[r],s.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function m(e,s){for(var t=0;t<s.length;t++){var r=s[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,s){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},h(e,s)}function f(e){var s=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=b(e);if(s){var a=b(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return function(e,s){if(s&&("object"===c(s)||"function"===typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,t)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var g={children:n().node,type:n().string,size:n().oneOfType([n().number,n().string]),bsSize:n().string,valid:n().bool,invalid:n().bool,tag:i.iC,innerRef:n().oneOfType([n().object,n().func,n().string]),plaintext:n().bool,addon:n().bool,className:n().string,cssModule:n().object},j=function(e){!function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&h(e,s)}(o,e);var s,t,a,n=f(o);function o(e){var s;return function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,o),(s=n.call(this,e)).getRef=s.getRef.bind(x(s)),s.focus=s.focus.bind(x(s)),s}return s=o,(t=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"focus",value:function(){this.ref&&this.ref.focus()}},{key:"render",value:function(){var e=this.props,s=e.className,t=e.cssModule,a=e.type,n=void 0===a?"text":a,o=e.bsSize,c=e.valid,m=e.invalid,h=e.tag,f=e.addon,x=e.plaintext,b=e.innerRef,g=p(e,d),j=["switch","radio","checkbox"].indexOf(n)>-1,v="select"===n,y="range"===n,w=h||(v||"textarea"===n?n:"input"),Z="form-control";x?(Z="".concat(Z,"-plaintext"),w=h||"input"):y?Z="form-range":v?Z="form-select":j&&(Z=f?null:"form-check-input"),g.size&&/\D/g.test(g.size)&&((0,i.O4)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),o=g.size,delete g.size);var N=(0,i.mx)(l()(s,m&&"is-invalid",c&&"is-valid",!!o&&(v?"form-select-".concat(o):"form-control-".concat(o)),Z),t);return("input"===w||h&&"function"===typeof h)&&(g.type="switch"===n?"checkbox":n),g.children&&!x&&"select"!==n&&"string"===typeof w&&"select"!==w&&((0,i.O4)('Input with a type of "'.concat(n,'" cannot have children. Please use "value"/"defaultValue" instead.')),delete g.children),r.createElement(w,u({},g,{ref:b,className:N,"aria-invalid":m}))}}])&&m(s.prototype,t),a&&m(s,a),Object.defineProperty(s,"prototype",{writable:!1}),o}(r.Component);j.propTypes=g;const v=j}}]);