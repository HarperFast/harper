"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[502],{448:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var r=s(7313),n=s(6782),a=s(5399),o=s(8467),c=s(7387),i=s(3672),d=s.n(i),l=s(6449),u=s(238),m=s(3516),p=s(9327),x=s(9842),h=s(576);var v=s(1891),j=s(1216),f=s(6047),_=s(4220),Z=s(2261),b=s(6417);const y=function(e){var t,s,i,y,g,N,w,C,S,k,O,P,E,T,R;let{setEditingCard:A,customerCard:F,formStateHeight:z,badCard:K}=e;const{customer_id:U}=(0,o.UO)(),I=(0,c.Kw)(l.Z,(e=>e.auth)),V=(0,c.Kw)(l.Z,(e=>e.instances)),q=(0,c.Kw)(l.Z,(e=>{var t;return null===(t=e.customer)||void 0===t?void 0:t.stripe_id})),[D,M]=(0,r.useState)({});return d()((async()=>{const{submitted:e}=D;if(e){if(V.find((e=>e.totalPrice)))M({error:"You have active, non-free instances."}),setTimeout((()=>M({})),2e3);else{M({processing:!0});const e=await(async e=>{let{auth:t,payment_method_id:s,stripe_id:r,customer_id:n}=e;return(0,h.Z)({endpoint:"removePaymentMethod",method:"POST",payload:{payment_method_id:s,stripe_id:r,customer_id:n},auth:t})})({auth:I,stripe_id:q,payment_method_id:F.id,customer_id:U});e.error?(M({error:e.message}),setTimeout((()=>M({})),2e3)):(M({success:!0}),await(0,f.Z)({auth:I,customer_id:U}),M({}),setTimeout((()=>A(!1)),0))}}}),[D]),(0,b.jsx)(x.SV,{onError:(e,t)=>(0,Z.Z)({error:{message:e.message,componentStack:t},customer_id:U}),FallbackComponent:_.Z,children:D.processing?(0,b.jsx)(v.Z,{height:z,status:"processing",header:"Removing Card From Account",subhead:"The Credit Schnauzer is securely contacting Stripe."}):D.success?(0,b.jsx)(v.Z,{height:z,status:"success",header:"Card Removed Successfully",subhead:"Your account is now limited to free products."}):D.error?(0,b.jsx)(v.Z,{height:z,status:"error",header:D.error,subhead:"You must remove them to remove your card."}):(0,b.jsx)(u.Z,{children:(0,b.jsxs)(m.Z,{children:[K&&(0,b.jsx)(j.Z,{}),(0,b.jsxs)(n.Z,{children:[(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"card number"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsxs)("div",{className:"input-static",children:["**** **** ****",null===F||void 0===F||null===(t=F.card)||void 0===t?void 0:t.last4]})}),(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)("hr",{className:"my-2"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"expiration"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsx)("div",{className:"input-static",children:"".concat(null===F||void 0===F||null===(s=F.card)||void 0===s?void 0:s.exp_month," / ").concat(null===F||void 0===F||null===(i=F.card)||void 0===i?void 0:i.exp_year)})}),(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)("hr",{className:"my-2"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"cvcc"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsx)("div",{className:"input-static",children:"***"})}),(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)("hr",{className:"my-2"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"country"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsx)("div",{className:"input-static",children:null===F||void 0===F||null===(y=F.billing_details)||void 0===y||null===(g=y.address)||void 0===g?void 0:g.country})}),(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)("hr",{className:"my-2"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"state/province"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsx)("div",{className:"input-static",children:null===F||void 0===F||null===(N=F.billing_details)||void 0===N||null===(w=N.address)||void 0===w?void 0:w.state})}),(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)("hr",{className:"my-2"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"address"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsx)("div",{className:"input-static",children:null===F||void 0===F||null===(C=F.billing_details)||void 0===C||null===(S=C.address)||void 0===S?void 0:S.line1})}),(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)("hr",{className:"my-2"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"apt/unit"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsx)("div",{className:"input-static",children:null===F||void 0===F||null===(k=F.billing_details)||void 0===k||null===(O=k.address)||void 0===O?void 0:O.line2})}),(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)("hr",{className:"my-2"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"city"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsx)("div",{className:"input-static",children:null===F||void 0===F||null===(P=F.billing_details)||void 0===P||null===(E=P.address)||void 0===E?void 0:E.city})}),(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)("hr",{className:"my-2"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"billing postal code"}),(0,b.jsx)(a.Z,{md:"6",xs:"12",children:(0,b.jsx)("div",{className:"input-static",children:null===F||void 0===F||null===(T=F.billing_details)||void 0===T||null===(R=T.address)||void 0===R?void 0:R.postal_code})})]}),(0,b.jsx)("hr",{className:"my-2"}),(0,b.jsxs)(n.Z,{children:[(0,b.jsx)(a.Z,{sm:"6",children:(0,b.jsx)(p.Z,{id:"removeCard",title:"Remove Card",disabled:D.submitted,onClick:()=>M({submitted:!0}),block:!0,className:"mt-3",color:"danger",children:"Remove Card"})}),(0,b.jsx)(a.Z,{sm:"6",children:(0,b.jsx)(p.Z,{id:"updateCard",block:!0,color:"success",className:"mt-3",onClick:()=>A(!0),children:"Update Card"})})]})]})})})};var g=s(4696),N=s(5733),w=s(2660),C=s(9537);const S=function(e){let{setEditingCard:t,customerCard:s,formStateHeight:i,badCard:h}=e;const{customer_id:y}=(0,o.UO)(),S=(0,c.Kw)(l.Z,(e=>e.auth)),k=(0,c.Kw)(l.Z,(e=>{var t;return null===(t=e.customer)||void 0===t?void 0:t.stripe_id})),[O,P]=(0,r.useState)({postal_code:!1,card:!1,expire:!1,cvc:!1}),[E,T]=(0,r.useState)({}),R=(0,g.useStripe)(),A=(0,g.useElements)(),F=(0,o.s0)(),{search:z}=(0,o.TH)(),{returnURL:K}=N.Z.parse(z);return d()((async()=>{const{submitted:e,processing:s}=E;if(e&&!s){const{card:e,expire:s,cvc:r,postal_code:n,line1:a,line2:o,state:c,city:i,country:d}=O;if(e&&s&&r&&n&&a&&c&&i&&d){const e=await R.createPaymentMethod({type:"card",card:A.getElement(g.CardNumberElement),billing_details:{address:{postal_code:n,line1:a,line2:o,state:c,city:i,country:d}}});if(T({processing:!0}),e.error)T({...E,error:e.error.message}),setTimeout((()=>T({...E,error:!1})),2e3);else{const s=await(0,w.Z)({auth:S,payment_method_id:e.paymentMethod.id,stripe_id:k,customer_id:y});s.error?(T({...E,error:s.message}),setTimeout((()=>T({...E,error:!1})),2e3)):(window._kmq&&window._kmq.push(["record","added credit card - billing page"]),T({success:s.message}),await(0,f.Z)({auth:S,customer_id:y}),K?F(K):t(!1))}}else T({error:"All fields are required"})}}),[E]),(0,b.jsx)(x.SV,{onError:(e,t)=>(0,Z.Z)({error:{message:e.message,componentStack:t},customer_id:y}),FallbackComponent:_.Z,children:E.processing?(0,b.jsx)(v.Z,{height:i,status:"processing",header:"Adding Card To Your Account",subhead:"The Credit Schnauzer is securely contacting Stripe."}):E.success?(0,b.jsx)(v.Z,{height:i,status:"success",header:"Success!",subhead:"Credit Card was successfully added to your account."}):E.error?(0,b.jsx)(v.Z,{height:i,status:"error",header:E.error,subhead:"Please try again"}):(0,b.jsx)(u.Z,{children:(0,b.jsxs)(m.Z,{children:[h&&(0,b.jsx)(j.Z,{}),(0,b.jsx)(C.Z,{setFormData:P,formData:O}),(0,b.jsx)("hr",{className:"my-2"}),(0,b.jsxs)(n.Z,{children:[s&&(0,b.jsx)(a.Z,{sm:"6",children:(0,b.jsx)(p.Z,{id:"editCard",onClick:()=>t(!1),block:!0,color:"danger",className:"mt-3",children:"Cancel"})}),(0,b.jsx)(a.Z,{children:(0,b.jsx)(p.Z,{id:s?"saveNewCard":"addCardToAccount",title:s?"Save New Card":"Add Card To Account",disabled:E.submitted||!O.card||!O.expire||!O.cvc||!O.postal_code||!R||!A,onClick:()=>T({submitted:!0}),block:!0,className:"mt-3",color:"success",children:s?"Save New Card":"Add Card To Account"})})]})]})})})};const k=function(){const[e,t]=(0,r.useState)(!1),s=(0,c.Kw)(l.Z,(e=>e.hasCard),[e]),n=(0,c.Kw)(l.Z,(e=>{var t,s;return"invoice.payment_failed"===(null===(t=e.customer)||void 0===t||null===(s=t.current_payment_status)||void 0===s?void 0:s.status)})),a="582px";return(0,b.jsx)("div",{className:"mt-3 mb-4",children:e||!s?(0,b.jsx)(S,{formStateHeight:a,setEditingCard:t,customerCard:s,badCard:n}):(0,b.jsx)(y,{formStateHeight:a,setEditingCard:t,customerCard:s,badCard:n})})};var O=s(511);let P;const E=function(){const{customer_id:e}=(0,o.UO)(),t=(0,c.Kw)(l.Z,(e=>e.auth)),s=(0,c.Kw)(l.Z,(e=>e.invoices));return d()((()=>{P=new AbortController,(async e=>{let{auth:t,signal:s,customer_id:r}=e,n=null;try{n=await(0,h.Z)({endpoint:"getInvoices",method:"POST",payload:{customer_id:r},signal:s,auth:t});let e=[];return Array.isArray(n)&&(e=n),l.Z.update((t=>{t.invoices=e.filter((e=>e.amount_paid))}))}catch(a){return(0,Z.Z)({type:"lms data",status:"error",url:O.Z.lms_api_url,operation:"getInvoices",request:{customer_id:r},error:{catch:a.toString()},customer_id:r})}})({auth:t,signal:P.signal,customer_id:e})}),(()=>{var e;return null===(e=P)||void 0===e?void 0:e.abort()}),[]),(0,b.jsx)(x.SV,{onError:(t,s)=>(0,Z.Z)({error:{message:t.message,componentStack:s},customer_id:e}),FallbackComponent:_.Z,children:(0,b.jsx)(u.Z,{className:"my-3",children:(0,b.jsx)(m.Z,{children:s?s.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(n.Z,{children:[(0,b.jsx)(a.Z,{xs:"6",className:"text text-bold text-small",children:"date"}),(0,b.jsx)(a.Z,{xs:"3",className:"text-end text-bold text-small",children:"amount"}),(0,b.jsx)(a.Z,{xs:"3",className:"text-end text-bold text-small",children:"print"})]}),s.map((e=>(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)("hr",{className:"mt-2"}),(0,b.jsxs)(n.Z,{className:"pb-2",children:[(0,b.jsx)(a.Z,{xs:"6",className:"text text-nowrap",children:new Date(1e3*e.created).toLocaleString()}),(0,b.jsxs)(a.Z,{xs:"3",className:"text-end text text-nowrap",children:["$",(e.total/100).toFixed(2)]}),(0,b.jsx)(a.Z,{xs:"3",className:"text-end text text-nowrap",children:(0,b.jsx)("a",{title:"print invoice",href:e.hosted_invoice_url,target:"_blank",rel:"noopener noreferrer",children:(0,b.jsx)("i",{className:"fa fa-print text-purple"})})})]})]},e.id)))]}):(0,b.jsx)("div",{className:"py-5 text-center",children:"You have not yet received an invoice."}):(0,b.jsx)("div",{className:"py-5 text-center",children:(0,b.jsx)("i",{className:"fa fa-spinner fa-spin text-purple"})})})})})};var T=s(3903);const R=function(){const{customer_id:e}=(0,o.UO)(),t=(0,c.Kw)(l.Z,(e=>e.customer.stripe_coupons));return(0,b.jsx)(x.SV,{onError:(t,s)=>(0,Z.Z)({error:{message:t.message,componentStack:s},customer_id:e}),FallbackComponent:_.Z,children:(0,b.jsx)(u.Z,{className:"my-3",children:(0,b.jsxs)(m.Z,{children:[(0,b.jsx)(T.Z,{}),null!==t&&void 0!==t&&t.length?(0,b.jsxs)("div",{className:"mt-2",children:[t.map((e=>(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)("hr",{className:"my-2"}),(0,b.jsxs)(n.Z,{children:[(0,b.jsx)(a.Z,{xs:"6",children:e.name}),(0,b.jsxs)(a.Z,{xs:"6",className:"text-end",children:["$",parseInt(e.amount_off/100,10)]})]})]},e.id))),(0,b.jsx)("hr",{className:"my-2"}),(0,b.jsxs)(n.Z,{children:[(0,b.jsx)(a.Z,{xs:"6",children:(0,b.jsx)("b",{children:"Total Credit"})}),(0,b.jsx)(a.Z,{xs:"6",className:"text-end",children:(0,b.jsxs)("b",{children:["$",t.reduce(((e,t)=>e+parseInt(t.amount_off/100,10)),0)]})})]})]}):null]})})})};var A=s(5085),F=s(3230);const z=function(){const{customer_id:e}=(0,o.UO)(),t=(0,c.Kw)(l.Z,(e=>e.auth)),s=(0,c.Kw)(l.Z,(e=>e.products)),i=(0,c.Kw)(l.Z,(e=>e.regions)),u=(0,c.Kw)(l.Z,(e=>e.subscriptions)),m=(0,c.Kw)(l.Z,(e=>e.instances)),p=(0,c.Kw)(l.Z,(e=>e.customer.is_unpaid));return(0,r.useEffect)((()=>{(0,f.Z)({auth:t,customer_id:e})}),[]),d()((()=>{t&&s&&i&&u&&e&&(null===m||void 0===m||!m.length)&&(0,F.Z)({auth:t,customer_id:e,products:s,regions:i,subscriptions:u,instanceCount:null===m||void 0===m?void 0:m.length})}),[t,s,i,e,u,m]),(0,b.jsxs)(n.Z,{children:[p&&(0,b.jsx)(a.Z,{xs:"12",children:(0,b.jsx)(A.Z,{})}),(0,b.jsxs)(a.Z,{md:"6",children:[(0,b.jsx)("span",{className:"floating-card-header",children:"card"}),(0,b.jsx)(k,{})]}),(0,b.jsxs)(a.Z,{md:"6",children:[(0,b.jsx)("span",{className:"floating-card-header",children:"coupons"}),(0,b.jsx)(R,{}),(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"floating-card-header",children:"invoices"}),(0,b.jsx)(E,{})]})]})}},1216:(e,t,s)=>{s.d(t,{Z:()=>n});s(7313);var r=s(6417);const n=function(){return(0,r.jsxs)("div",{className:"text-danger",children:[(0,r.jsx)("i",{children:"Your most recent card payment failed. Please update your card below."}),(0,r.jsx)("hr",{className:"mt-3 mb-2"})]})}},3903:(e,t,s)=>{s.d(t,{Z:()=>b});var r=s(7313),n=s(6782),a=s(5399),o=s(1781),c=s(9327),i=s(3672),d=s.n(i),l=s(7387),u=s(9842),m=s(8467),p=s(5733),x=s(6449),h=s(576);var v=s(6047),j=s(4220),f=s(2261),_=s(6417);let Z;const b=function(){const{customer_id:e}=(0,m.UO)(),{search:t}=(0,m.TH)(),{code:s}=p.Z.parse(t),i=(0,l.Kw)(x.Z,(e=>e.auth)),[b,y]=(0,r.useState)({coupon_code:s}),[g,N]=(0,r.useState)({}),[w,C]=(0,r.useState)(!1);return d()((async()=>{if(g.submitted){const{coupon_code:t}=b;if(t){Z=new AbortController;const s=await(async e=>{let{auth:t,customer_id:s,coupon_code:r}=e;return(0,h.Z)({endpoint:"addCoupon",method:"POST",auth:t,payload:{customer_id:s,coupon_code:r,user_id:t.user_id}})})({auth:i,customer_id:e,coupon_code:t});!1===s.result||s.error?(y({coupon_code:""}),N({error:s.message})):(window._kmq&&window._kmq.push(["record","user added coupon"]),await(0,v.Z)({auth:i,customer_id:e}),w&&(y({coupon_code:""}),N({})))}else N({error:"Please enter a valid coupon code"})}}),(()=>{var e;return null===(e=Z)||void 0===e?void 0:e.abort()}),[g]),d()((()=>{g.submitted||N({})}),[b]),d()((()=>{C(!0),b.coupon_code&&N({submitted:!0})}),(()=>C(!1)),[]),(0,_.jsx)(u.SV,{onError:(t,s)=>(0,f.Z)({error:{message:t.message,componentStack:s},customer_id:e}),FallbackComponent:j.Z,children:(0,_.jsxs)(n.Z,{children:[(0,_.jsx)(a.Z,{md:"6",children:(0,_.jsx)(o.Z,{id:"coupon_code",className:"mb-2",type:"text",value:b.coupon_code,invalid:!!g.error,disabled:g.submitted,placeholder:"coupon code",onChange:e=>y({coupon_code:e.target.value.toUpperCase()})})}),(0,_.jsx)(a.Z,{md:"6",children:(0,_.jsx)(c.Z,{id:"addCoupon",color:"success",disabled:g.submitted,block:!0,onClick:()=>N({submitted:!0}),children:g.submitted?(0,_.jsx)("i",{className:"fa fa-spinner fa-spin text-white"}):(0,_.jsx)("span",{children:"Add Coupon"})})}),(0,_.jsxs)(a.Z,{xs:"12",className:"text-center text-danger text-small",children:[g.error,"\xa0"]})]})})}},9537:(e,t,s)=>{s.d(t,{Z:()=>v});var r=s(7313),n=s(6782),a=s(5399),o=s(1781),c=s(4696),i=s(1410),d=s(7387),l=s(8467),u=s(9842);var m=s(6449),p=s(4220),x=s(2261),h=s(6417);const v=function(e){let{setFormData:t,formData:s}=e;const{customer_id:v}=(0,l.UO)(),[j,f]=(0,r.useState)({}),_=(e=>{let{theme:t}=e;return{style:{base:{iconColor:"#403b8a",color:"dark"===t?"#ffffff":"#212121",fontWeight:100,fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans", Arial, Helvetica, Verdana, Sans-Serif',fontSize:"14px",fontSmoothing:"antialiased","::placeholder":{color:"#bcbcbc"}},invalid:{iconColor:"#ea4c89",color:"#ea4c89"}}}})({theme:(0,d.Kw)(m.Z,(e=>e.theme))});return(0,h.jsx)(u.SV,{onError:(e,t)=>(0,x.Z)({error:{message:e.message,componentStack:t},customer_id:v}),FallbackComponent:p.Z,children:(0,h.jsxs)(n.Z,{children:[(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"card number"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)("div",{className:"fake-input ".concat(j.cardError?"error":""),children:(0,h.jsx)(c.CardNumberElement,{options:_,id:"ccCardNumber",onChange:e=>{var r;f({...j,cardError:null===(r=e.error)||void 0===r?void 0:r.message}),t({...s,card:e.complete})}})})}),(0,h.jsx)(a.Z,{xs:"12",children:(0,h.jsx)("hr",{className:"my-2"})}),(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"expiration"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)("div",{className:"fake-input ".concat(j.expError?"error":""),children:(0,h.jsx)(c.CardExpiryElement,{options:_,id:"ccExpire",onChange:e=>{var r;f({...j,expError:null===(r=e.error)||void 0===r?void 0:r.message}),t({...s,expire:e.complete})}})})}),(0,h.jsx)(a.Z,{xs:"12",children:(0,h.jsx)("hr",{className:"my-2"})}),(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"cvcc"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)("div",{className:"fake-input ".concat(j.cvcError?"error":""),children:(0,h.jsx)(c.CardCvcElement,{id:"ccCVC",options:_,onChange:e=>{var r;f({...j,cvcError:null===(r=e.error)||void 0===r?void 0:r.message}),t({...s,cvc:e.complete})}})})}),(0,h.jsx)(a.Z,{xs:"12",children:(0,h.jsx)("hr",{className:"my-2"})}),(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"country"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)(i.Px,{id:"ccCountry",valueType:"short",value:s.country,priorityOptions:["CA","US","GB"],defaultOptionLabel:"select your country",onChange:e=>t({...s,country:e})})}),(0,h.jsx)(a.Z,{xs:"12",children:(0,h.jsx)("hr",{className:"my-2"})}),(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"state/province"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)(i.Xz,{id:"ccRegion",blankOptionLabel:"select country first",defaultOptionLabel:"select state / province",valueType:"short",countryValueType:"short",country:s.country,value:s.state,onChange:e=>t({...s,state:e})})}),(0,h.jsx)(a.Z,{xs:"12",children:(0,h.jsx)("hr",{className:"my-2"})}),(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"address"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)(o.Z,{id:"ccLine1",onChange:e=>t({...s,line1:e.target.value})})}),(0,h.jsx)(a.Z,{xs:"12",children:(0,h.jsx)("hr",{className:"my-2"})}),(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"apt/unit"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)(o.Z,{id:"ccApt",onChange:e=>t({...s,line2:e.target.value})})}),(0,h.jsx)(a.Z,{xs:"12",children:(0,h.jsx)("hr",{className:"my-2"})}),(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"city"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)(o.Z,{id:"ccCity",onChange:e=>t({...s,city:e.target.value})})}),(0,h.jsx)(a.Z,{xs:"12",children:(0,h.jsx)("hr",{className:"my-2"})}),(0,h.jsx)(a.Z,{xs:"6",className:"text text-nowrap d-none d-md-block pt-2",children:"billing postal code"}),(0,h.jsx)(a.Z,{md:"6",xs:"12",className:"text-md-end text-center",children:(0,h.jsx)(o.Z,{id:"ccPostalCode",onChange:e=>t({...s,postal_code:e.target.value})})})]})})}},1891:(e,t,s)=>{s.d(t,{Z:()=>o});s(7313);var r=s(238),n=s(3516),a=s(6417);const o=function(e){let{header:t,subhead:s=" ",height:o,status:c,className:i}=e;return(0,a.jsx)(r.Z,{className:"form-status ".concat(i),children:(0,a.jsxs)(n.Z,{className:"text-center",style:{height:o},children:[(0,a.jsx)("div",{className:"text-bold",children:t}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)("i",{className:"fa fa-lg ".concat("processing"===c?"fa-spinner fa-spin text-purple":"success"===c?"fa-check-circle text-purple":"fa-exclamation-triangle text-danger")})}),(0,a.jsx)("div",{className:"text-grey",children:s})]})})}},5085:(e,t,s)=>{s.d(t,{Z:()=>o});s(7313);var r=s(238),n=s(3516),a=s(6417);const o=function(){return(0,a.jsx)(r.Z,{color:"danger",className:"mb-4",children:(0,a.jsx)(n.Z,{className:"text-center text-danger",children:"This Organization Will Not Be Billed"})})}},2660:(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(576);const n=async e=>{let{auth:t,payment_method_id:s,stripe_id:n,customer_id:a}=e;return(0,r.Z)({endpoint:"addPaymentMethod",method:"POST",payload:{payment_method_id:s,stripe_id:n,customer_id:a},auth:t})}},6047:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(576),n=s(6449),a=s(2261),o=s(511),c=s(2174);const i=async e=>{let{auth:t,customer_id:s}=e,i=null;try{var d;return i=await(0,r.Z)({endpoint:"getCustomer",method:"POST",payload:{customer_id:s},auth:t}),(0,c.Z)({auth:t,customer_id:s,stripe_id:null===(d=i)||void 0===d?void 0:d.stripe_id}),i.error||n.Z.update((e=>{var t;e.customer={...i,customer_id:s},e.hasCard=null===(t=i.stripe_payment_methods)||void 0===t?void 0:t[0]})),i}catch(l){return(0,a.Z)({type:"lms data",status:"error",url:o.Z.lms_api_url,operation:"getCustomer",request:{customer_id:s},error:{catch:l.toString()},customer_id:s})}}},3230:(e,t,s)=>{s.d(t,{Z:()=>d});var r=s(576),n=s(6449),a=s(1842);const o=e=>{let{is_local:t,wavelength_zone_id:s,cloud_provider:r}=e;switch(!0){case s:return"wavelength_compute";case t:return"local_compute";case"akamai"===r:return"akamai_compute";default:return"cloud_compute"}};var c=s(2261),i=s(511);const d=async e=>{let{auth:t,customer_id:s,products:d,regions:l,subscriptions:u,instanceCount:m=0}=e,p=null;try{if(p=await(0,r.Z)({endpoint:"getInstances",method:"POST",payload:{customer_id:s,user_id:t.user_id},auth:t}),Array.isArray(p)){const e=p.map((e=>{const t=(e=>{let{instance:t,products:s,regions:r,subscriptions:n}=e;try{var c,i;const e=t.compute_subscription_id?n[o(t)]:s[o(t)],d=null===e||void 0===e?void 0:e.find((e=>e.value.stripe_plan_id===t.stripe_plan_id&&(!t.compute_subscription_id||e.value.compute_subscription_id===t.compute_subscription_id))),l=t.storage_subscription_id?n.cloud_storage:s.cloud_storage,u=!t.is_local&&(null===l||void 0===l?void 0:l.find((e=>e.value.data_volume_size===t.data_volume_size&&e.value.stripe_storage_plan_id===t.stripe_storage_plan_id&&(!t.storage_subscription_id||e.value.storage_subscription_id===t.storage_subscription_id)))),m=parseFloat((null===d||void 0===d||null===(c=d.value)||void 0===c?void 0:c.compute_price)||0)+parseFloat((null===u||void 0===u||null===(i=u.value)||void 0===i?void 0:i.storage_price)||0),p=m?"$".concat((0,a.Z)(m.toFixed(2))):"FREE",x=t.compute_subscription_id&&t.storage_subscription_id?"PREPAID":m?"".concat(p,"/").concat(d.value.compute_interval):"FREE",h=!t.is_local&&r.find((e=>e.value===t.instance_region));return{compute:null===d||void 0===d?void 0:d.value,storage:null===u||void 0===u?void 0:u.value,totalPrice:m,totalPriceString:p,totalPriceStringWithInterval:x,region:h}}catch(d){return console.log(d)}})({instance:e,products:d,regions:l,subscriptions:u});return{...e,...t}})),t=e.sort(((e,t)=>e.instance_name>t.instance_name?1:-1));return n.Z.update((e=>{e.instances=t})),t}return!m&&n.Z.update((e=>{e.instances=[]}))}catch(x){return(0,c.Z)({type:"lms data",status:"error",url:i.Z.lms_api_url,operation:"getInstances",request:{customer_id:s},error:{catch:x.toString()},customer_id:s})}}},2174:(e,t,s)=>{s.d(t,{Z:()=>d});var r=s(576),n=s(6449),a=s(2261),o=s(8329),c=s(9274),i=s(511);const d=async e=>{let{auth:t,customer_id:s,stripe_id:d}=e;try{const e=await(0,r.Z)({endpoint:"getPrepaidSubscriptions",method:"POST",payload:{customer_id:s,stripe_id:d},auth:t});return!e.error&&n.Z.update((t=>{t.subscriptions={cloud_storage:(0,c.Z)(e.cloud_storage||[]),cloud_compute:(0,o.Z)(e.cloud_compute||[]),wavelength_compute:(0,o.Z)(e.wavelength_compute||[]),local_compute:(0,o.Z)(e.local_compute||[])}}))}catch(l){return(0,a.Z)({type:"lms data",status:"error",url:i.Z.lms_api_url,operation:"getPrepaidSubscriptions",error:{catch:l.toString()}})}}},1781:(e,t,s)=>{s.d(t,{Z:()=>Z});var r=s(7313),n=s(5192),a=s.n(n),o=s(6123),c=s.n(o),i=s(986);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var l=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},u.apply(this,arguments)}function m(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)s=a[r],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)s=a[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function p(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=j(e);if(t){var n=j(this).constructor;s=Reflect.construct(r,arguments,n)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,s)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var f={children:a().node,type:a().string,size:a().oneOfType([a().number,a().string]),bsSize:a().string,valid:a().bool,invalid:a().bool,tag:i.iC,innerRef:a().oneOfType([a().object,a().func,a().string]),plaintext:a().bool,addon:a().bool,className:a().string,cssModule:a().object},_=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(o,e);var t,s,n,a=h(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getRef=t.getRef.bind(v(t)),t.focus=t.focus.bind(v(t)),t}return t=o,(s=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"focus",value:function(){this.ref&&this.ref.focus()}},{key:"render",value:function(){var e=this.props,t=e.className,s=e.cssModule,n=e.type,a=void 0===n?"text":n,o=e.bsSize,d=e.valid,p=e.invalid,x=e.tag,h=e.addon,v=e.plaintext,j=e.innerRef,f=m(e,l),_=["switch","radio","checkbox"].indexOf(a)>-1,Z="select"===a,b="range"===a,y=x||(Z||"textarea"===a?a:"input"),g="form-control";v?(g="".concat(g,"-plaintext"),y=x||"input"):b?g="form-range":Z?g="form-select":_&&(g=h?null:"form-check-input"),f.size&&/\D/g.test(f.size)&&((0,i.O4)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),o=f.size,delete f.size);var N=(0,i.mx)(c()(t,p&&"is-invalid",d&&"is-valid",!!o&&(Z?"form-select-".concat(o):"form-control-".concat(o)),g),s);return("input"===y||x&&"function"===typeof x)&&(f.type="switch"===a?"checkbox":a),f.children&&!v&&"select"!==a&&"string"===typeof y&&"select"!==y&&((0,i.O4)('Input with a type of "'.concat(a,'" cannot have children. Please use "value"/"defaultValue" instead.')),delete f.children),r.createElement(y,u({},f,{ref:j,className:N,"aria-invalid":p}))}}])&&p(t.prototype,s),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.Component);_.propTypes=f;const Z=_}}]);