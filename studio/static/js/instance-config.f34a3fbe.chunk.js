"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[6490],{7535:(e,t,s)=>{s.r(t),s.d(t,{default:()=>W,metadata:()=>H});var n=s(7313),a=s(6782),i=s(5399),r=s(9327),c=s(238),o=s(3516),l=s(7387),d=s(8467),u=s(9842),m=s(3672),p=s.n(m),h=s(5447),_=s(6449),x=s(8212),v=s(6160),j=s(511),f=s(6417);const g=function(e){let{which:t,compute:s,storage:n,total:r}=e;return(0,f.jsx)(c.Z,{className:"my-3",children:(0,f.jsxs)(o.Z,{className:"p-2 text-small",children:[(0,f.jsxs)(a.Z,{children:[(0,f.jsxs)(i.Z,{xs:"6",className:"text-nowrap",children:["Compute","compute"===t&&" (new)"]}),(0,f.jsx)(i.Z,{xs:"6",className:"text-nowrap text-end text-truncate",children:s}),(0,f.jsx)(i.Z,{xs:"12",children:(0,f.jsx)("hr",{className:"my-1"})})]}),(0,f.jsxs)(a.Z,{children:[(0,f.jsxs)(i.Z,{xs:"6",className:"text-nowrap",children:["Storage","storage"===t&&" (new)"]}),(0,f.jsx)(i.Z,{xs:"6",className:"text-nowrap text-end text-truncate",children:n}),(0,f.jsx)(i.Z,{xs:"12",children:(0,f.jsx)("hr",{className:"my-1"})})]}),(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(i.Z,{xs:"6",className:"text-nowrap",children:(0,f.jsx)("b",{children:"New Total"})}),(0,f.jsx)(i.Z,{xs:"6",className:"text-nowrap text-end text-truncate",children:(0,f.jsx)("b",{children:r})})]})]})})};var Z=s(1216),b=s(9105),w=s(576);const y=async e=>(0,w.Z)({endpoint:"updateInstance",method:"POST",payload:Object.entries({stripe_plan_id:e.stripe_plan_id,compute_stack_id:e.compute_stack_id,customer_id:e.customer_id,data_volume_size:e.data_volume_size,stripe_storage_plan_id:e.stripe_storage_plan_id,compute_subscription_id:e.compute_subscription_id,storage_subscription_id:e.storage_subscription_id}).reduce(((e,t)=>{let[s,n]=t;return null==n||(e[s]=n),e}),{}),auth:e.auth});var N=s(1842);const C=function(e){let{setInstanceAction:t,showPrepaidStorage:s}=e;const{customer_id:u,compute_stack_id:m}=(0,d.UO)(),w=(0,d.s0)(),C=(0,v.VY)(),k=(0,l.Kw)(_.Z,(e=>e.auth)),S=(0,l.Kw)(_.Z,(e=>e.hasCard)),E=(0,l.Kw)(_.Z,(e=>{var t,s;return"invoice.payment_failed"===(null===(t=e.customer)||void 0===t||null===(s=t.current_payment_status)||void 0===s?void 0:s.status)})),O=(0,l.Kw)(h.Z,(e=>e.compute)),P=(0,l.Kw)(h.Z,(e=>e.storage)),K=(0,l.Kw)(h.Z,(e=>e.is_local)),T=(0,l.Kw)(h.Z,(e=>!["CREATE_COMPLETE","UPDATE_COMPLETE"].includes(e.status))),R=(0,l.Kw)(h.Z,(e=>e.last_volume_resize)),A=(0,l.Kw)(h.Z,(e=>e.data_volume_size)),I=(0,l.Kw)(_.Z,(e=>e.products.cloud_storage.filter((e=>e.value.data_volume_size>=(null===P||void 0===P?void 0:P.data_volume_size))))),z=(0,l.Kw)(_.Z,(e=>e.subscriptions.cloud_storage.filter((e=>(e.value.data_volume_size===A||e.value.storage_quantity_available>=e.value.data_volume_size)&&e.value.data_volume_size>=(null===P||void 0===P?void 0:P.data_volume_size))))),[D,F]=(0,n.useState)({}),[L,U]=(0,n.useState)({compute_stack_id:m,customer_id:u,...P}),[M,V]=(0,n.useState)(!1),B=s?z:I,Y=B.find((e=>e.value.data_volume_size===L.data_volume_size&&e.value.stripe_storage_plan_id===L.stripe_storage_plan_id&&e.value.storage_subscription_id===L.storage_subscription_id)),q=k.orgs.filter((e=>k.user_id===e.owner_user_id)).reduce(((e,t)=>e+t.free_cloud_instance_count),0)<j.Z.free_cloud_instance_limit,H=((null===L||void 0===L?void 0:L.storage_price)||0)+((null===O||void 0===O?void 0:O.compute_price)||0),W=H?"".concat((0,N.Z)(H.toFixed(2)),"/").concat(O.compute_interval):"FREE",G=!R||(Date.now()-new Date(R).getTime())/1e3/3600>6,J=()=>U({compute_stack_id:m,customer_id:u,...P});return p()(J,[s]),p()((()=>{V((null===P||void 0===P?void 0:P.data_volume_size)!==L.data_volume_size||(null===P||void 0===P?void 0:P.stripe_storage_plan_id)!==L.stripe_storage_plan_id||(null===P||void 0===P?void 0:P.storage_subscription_id)!==L.storage_subscription_id)}),[L]),p()((()=>{V(!1)}),[m]),p()((async()=>{const{submitted:e}=D;if(e){t("Updating");(await y({auth:k,...L})).error?(C.error("There was an error updating your instance. Please try again later."),t(!1)):(window._kmq&&window._kmq.push(["record","upgrade instance - disk size",{totalPrice:null===L||void 0===L?void 0:L.compute_price,currency:"USD",products:[{name:"storage",id:Y.data_volume_size_string,price:(null===L||void 0===L?void 0:L.storage_price)||0}]}]),C.success("Instance update initialized successfully"),_.Z.update((e=>{e.lastUpdate=Date.now()})),setTimeout((()=>w("/o/".concat(u,"/instances"))),100))}}),[D]),T?(0,f.jsx)(c.Z,{className:"error",children:(0,f.jsx)(o.Z,{children:"instance updating. please wait."})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.ZP,{className:"react-select-container",classNamePrefix:"react-select",onChange:e=>{let{value:t}=e;return U({...L,...t})},options:B.filter((e=>e.value.active)),value:Y,defaultValue:P,isSearchable:!1,isClearable:!1,isLoading:!B,placeholder:"Select Data Volume Size",styles:{placeholder:e=>({...e,textAlign:"center",width:"100%",color:"#BCBCBC"})}}),!M||L.storage_subscription_id||H||K||q?M&&!G?(0,f.jsx)(c.Z,{className:"error mt-3 text-start",children:(0,f.jsxs)(o.Z,{children:["You may update disk size every 6 hours",(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"Last resize: ",new Date(R).toLocaleTimeString(),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"Try again at: ",new Date(new Date(R).getTime()+216e5).toLocaleTimeString()]})}):M&&(null!==L&&void 0!==L&&L.storage_price||null!==O&&void 0!==O&&O.compute_price)&&E?(0,f.jsxs)("div",{className:"mt-3",children:[(0,f.jsx)(Z.Z,{}),(0,f.jsx)(b.Z,{disabled:!M||D.submitted,label:"Update Credit Card",onClick:()=>w("/o/".concat(u,"/billing?returnURL=/").concat(u,"/i/").concat(m,"/config"))})]}):M&&(null!==L&&void 0!==L&&L.storage_price||null!==O&&void 0!==O&&O.compute_price)&&!S?(0,f.jsx)(b.Z,{disabled:!M||D.submitted,label:"Add Credit Card To Account",onClick:()=>w("/o/".concat(u,"/billing?returnURL=/").concat(u,"/i/").concat(m,"/config"))}):M?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g,{which:"storage",compute:null===O||void 0===O?void 0:O.compute_price_string_with_interval,storage:(null===L||void 0===L?void 0:L.storage_price_string_with_interval)||"FREE",total:W}),(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Z,{id:"cancelChange",onClick:J,title:"Cancel",block:!0,disabled:D.submitted,color:"grey",children:"Cancel"})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Z,{id:"confirmChange",onClick:()=>F({submitted:!0}),title:"Confirm Instance Details",block:!0,disabled:!M||D.submitted,color:"success",children:"Update"})})]})]}):null:(0,f.jsx)(c.Z,{className:"error mt-3",children:(0,f.jsxs)(o.Z,{children:["You are limited to ",j.Z.free_cloud_instance_limit," free cloud instance",1!==j.Z.free_cloud_instance_limit?"s":""]})})]})};const k=function(e){let{setInstanceAction:t,showPrepaidCompute:s}=e;const{customer_id:u,compute_stack_id:m}=(0,d.UO)(),w=(0,d.s0)(),C=(0,v.VY)(),k=(0,l.Kw)(_.Z,(e=>e.auth)),S=(0,l.Kw)(_.Z,(e=>e.hasCard)),E=(0,l.Kw)(_.Z,(e=>{var t,s;return"invoice.payment_failed"===(null===(t=e.customer)||void 0===t||null===(s=t.current_payment_status)||void 0===s?void 0:s.status)})),O=(0,l.Kw)(h.Z,(e=>e.compute)),P=(0,l.Kw)(h.Z,(e=>e.storage)),K=(0,l.Kw)(h.Z,(e=>e.is_local)),T=(0,l.Kw)(h.Z,(e=>e.wavelength_zone_id)),R=(0,l.Kw)(h.Z,(e=>e.compute_subscription_id)),A=(0,l.Kw)(h.Z,(e=>!["CREATE_COMPLETE","UPDATE_COMPLETE"].includes(e.status))),I=(0,l.Kw)(_.Z,(e=>e.products[K?"local_compute":T?"wavelength_compute":"cloud_compute"])),z=(0,l.Kw)(_.Z,(e=>e.subscriptions[K?"local_compute":T?"wavelength_compute":"cloud_compute"].filter((e=>e.value.compute_subscription_id===R||e.value.compute_quantity_available)))),[D,F]=(0,n.useState)({}),[L,U]=(0,n.useState)({compute_stack_id:m,customer_id:u,...O}),[M,V]=(0,n.useState)(!1),B=s?z:I,Y=B.find((e=>e.value.stripe_plan_id===L.stripe_plan_id&&e.value.compute_subscription_id===L.compute_subscription_id)),q=k.orgs.filter((e=>k.user_id===e.owner_user_id)).reduce(((e,t)=>e+t.free_cloud_instance_count),0)<j.Z.free_cloud_instance_limit,H=((null===P||void 0===P?void 0:P.storage_price)||0)+((null===L||void 0===L?void 0:L.compute_price)||0),W=H?"".concat((0,N.Z)(H.toFixed(2)),"/").concat(O.compute_interval):"FREE",G=()=>U({compute_stack_id:m,customer_id:u,...O});return p()(G,[s]),p()((()=>{V((null===O||void 0===O?void 0:O.stripe_plan_id)!==L.stripe_plan_id||L.compute_subscription_id!==(null===O||void 0===O?void 0:O.compute_subscription_id))}),[L]),p()((()=>{V(!1)}),[m]),p()((async()=>{const{submitted:e}=D;if(e)if(H||L.compute_subscription_id||K||q){t("Updating");(await y({auth:k,...L})).error?(C.error("There was an error updating your instance. Please try again later."),t(!1)):(window._kmq&&window._kmq.push(["record","upgrade instance - RAM",{totalPrice:null===L||void 0===L?void 0:L.compute_price,currency:"USD",products:[{name:"compute",id:Y.compute_ram_string,price:(null===L||void 0===L?void 0:L.compute_price)||0}]}]),C.success("Instance update initialized successfully"),_.Z.update((e=>{e.lastUpdate=Date.now()})),setTimeout((()=>w("/o/".concat(u,"/instances"))),100))}else C.error("You are limited to ".concat(j.Z.free_cloud_instance_limit," free cloud instance").concat(1!==j.Z.free_cloud_instance_limit?"s":"")),G(),F({})}),[D]),A?(0,f.jsx)(c.Z,{className:"error",children:(0,f.jsx)(o.Z,{children:"instance updating. please wait."})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.ZP,{className:"react-select-container",classNamePrefix:"react-select",onChange:e=>{let{value:t}=e;return U({...L,...t})},options:B.filter((e=>e.value.active)),value:Y,defaultValue:O,isSearchable:!1,isClearable:!1,isLoading:!B,placeholder:"select a RAM allotment",styles:{placeholder:e=>({...e,textAlign:"center",width:"100%",color:"#BCBCBC"})}}),!M||H||L.compute_subscription_id||K||q?M&&(null!==P&&void 0!==P&&P.storage_price||null!==L&&void 0!==L&&L.compute_price)&&E?(0,f.jsxs)("div",{className:"mt-3",children:[(0,f.jsx)(Z.Z,{}),(0,f.jsx)(b.Z,{disabled:!M||D.submitted,label:"Update Credit Card",onClick:()=>w("/o/".concat(u,"/billing?returnURL=/").concat(u,"/i/").concat(m,"/config"))})]}):M&&(null!==P&&void 0!==P&&P.storage_price||null!==L&&void 0!==L&&L.compute_price)&&!S?(0,f.jsx)(b.Z,{disabled:!M||D.submitted,label:"Add Credit Card To Account",onClick:()=>w("/o/".concat(u,"/billing?returnURL=/").concat(u,"/i/").concat(m,"/config"))}):M?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g,{which:"compute",compute:L.compute_price_string_with_interval,storage:(null===P||void 0===P?void 0:P.storage_price_string_with_interval)||"FREE",total:W}),(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Z,{id:"cancelChange",onClick:G,title:"Cancel",block:!0,disabled:D.submitted,color:"grey",children:"Cancel"})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Z,{id:"confirmChange",onClick:()=>F({submitted:!0}),title:"Confirm Instance Details",block:!0,disabled:!M||D.submitted,color:"success",children:"Update"})})]})]}):null:(0,f.jsx)(c.Z,{className:"error mt-2",children:(0,f.jsxs)(o.Z,{children:["You are limited to ",j.Z.free_cloud_instance_limit," free cloud instance",1!==j.Z.free_cloud_instance_limit?"s":""]})})]})};var S=s(1781),E=s(9858);const O=function(e){let{setInstanceAction:t}=e;const{customer_id:s,compute_stack_id:u}=(0,d.UO)(),m=(0,d.s0)(),x=(0,v.VY)(),j=(0,l.Kw)(_.Z,(e=>e.auth)),g=(0,l.Kw)(h.Z,(e=>e.instance_name)),Z=(0,l.Kw)(h.Z,(e=>e.is_local)),b=(0,l.Kw)(h.Z,(e=>e.wavelength_zone_id)),w=(0,l.Kw)(h.Z,(e=>!["CREATE_COMPLETE","UPDATE_COMPLETE"].includes(e.status))),[y,N]=(0,n.useState)({}),[C,k]=(0,n.useState)({});return p()((async()=>{const{submitted:e}=y;if(e){const{delete_instance_name:e}=C;if(g!==e)N({error:"instance name is not correct"});else{t("Removing");(await(0,E.Z)({auth:j,customer_id:s,compute_stack_id:u,wavelength_zone_id:b})).error?(x.error("There was an error removing your instance. Please try again later."),t(!1)):(x.success("Instance deletion initiated"),_.Z.update((e=>{e.lastUpdate=Date.now()})),setTimeout((()=>m("/o/".concat(s,"/instances"))),3e3))}}}),[y]),w?(0,f.jsx)(c.Z,{className:"error",children:(0,f.jsx)(o.Z,{children:"instance updating. please wait."})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S.Z,{id:"instance_name_remove",onChange:e=>k({delete_instance_name:e.target.value}),type:"text",title:"instance_name",placeholder:'Enter "'.concat(g,'" here to confirm.'),value:C.delete_instance_name||""}),C.delete_instance_name===g&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Z,{className:"my-2",children:(0,f.jsx)(o.Z,{className:"px-2 pb-2 pt-3 text-small",children:Z?(0,f.jsxs)("ul",{className:"text-small mb-0",children:[(0,f.jsxs)("li",{children:[(0,f.jsx)("b",{children:"DOES NOT"})," uninstall HarperDB."]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("b",{children:"DOES"})," leave all your data intact."]}),(0,f.jsx)("li",{children:"REMOVES your instance license."}),(0,f.jsx)("li",{children:"STOPS recurring license charges."}),(0,f.jsx)("li",{children:"LIMITS instance to 1GB RAM."}),(0,f.jsx)("li",{children:"REMOVES instance from the Studio."}),(0,f.jsx)("li",{children:"RESTARTS the instance."})]}):(0,f.jsxs)("ul",{className:"text-small mb-0",children:[(0,f.jsxs)("li",{children:[(0,f.jsx)("b",{children:"THIS IS"})," an irreversible process."]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("b",{children:"IT CANNOT"})," be undone."]}),(0,f.jsx)("li",{children:"DELETES your instance completely."}),(0,f.jsx)("li",{children:"STOPS recurring license charges."}),(0,f.jsx)("li",{children:"REMOVES instance from the Studio."})]})})}),(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Z,{id:"cancelDeleteInstance",onClick:()=>k({delete_instance_name:""}),title:"Cancel",block:!0,disabled:y.submitted,color:"grey",children:"Cancel"})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Z,{id:"removeInstance",onClick:()=>N({submitted:!0}),title:"Confirm Instance Details",block:!0,disabled:y.submitted,color:"danger",children:"Remove"})})]})]})]})};var P=s(4122),K=s(2230),T=s(8147);const R=function(e){let{instanceAction:t,setInstanceAction:s}=e;const d=(0,v.VY)(),u=(0,l.Kw)(h.Z,(e=>e.auth)),m=(0,l.Kw)(h.Z,(e=>e.url)),_=(0,l.Kw)(h.Z,(e=>e.instance_name)),x=(0,l.Kw)(h.Z,(e=>!["CREATE_COMPLETE","UPDATE_COMPLETE"].includes(e.status))),[g,Z]=(0,n.useState)({}),[b,w]=(0,n.useState)({});return p()((async()=>{const{submitted:e}=g;if(e){s("Restarting");const e=await(0,T.Z)({auth:u,url:m});null!==e&&void 0!==e&&e.error&&(s(!1),d.error("There was an error restarting your instance. Please try again later."))}}),[g]),(0,P.Z)((()=>{"Restarting"===t&&(async()=>{(await(0,K.Z)({auth:u,url:m})).error||(w({}),Z({}),s(!1),d.success("Instance restarted successfully"))})()}),j.Z.refresh_content_interval),"Restarting"===t?(0,f.jsx)(c.Z,{className:"error",children:(0,f.jsxs)(o.Z,{children:[(0,f.jsx)("i",{className:"fa fa-spin fa-spinner me-2"}),"instance restarting. please wait."]})}):!j.Z.is_local_studio&&x?(0,f.jsx)(c.Z,{className:"error",children:(0,f.jsx)(o.Z,{children:"instance updating. please wait."})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S.Z,{id:"instance_name_restart",onChange:e=>w({restart_instance_name:e.target.value}),type:"text",title:"instance_name",placeholder:'Enter "'.concat(_,'" here to confirm.'),value:b.restart_instance_name||""}),b.restart_instance_name===_&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Z,{className:"my-2",children:(0,f.jsx)(o.Z,{className:"px-2 pb-2 pt-3 text-small",children:(0,f.jsxs)("ul",{className:"text-small mb-0",children:[(0,f.jsxs)("li",{children:[(0,f.jsx)("b",{children:"WILL"})," interrupt connectivity."]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("b",{children:"WILL"})," leave all your data intact."]})]})})}),(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Z,{onClick:()=>w({restart_instance_name:""}),title:"Cancel",block:!0,disabled:g.submitted,color:"grey",children:"Cancel"})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Z,{onClick:()=>Z({submitted:!0}),title:"Confirm Instance Details",block:!0,disabled:g.submitted,color:"danger",children:"Restart"})})]})]})]})};var A=s(2589),I=s(7266);const z=function(e){var t,s,n,r,d,u,m,p;let{clusterNodeName:_,instanceConfig:x}=e;const v=(0,l.Kw)(h.Z,(e=>e.url)),g=(0,l.Kw)(h.Z,(e=>e.auth)),Z=(0,l.Kw)(h.Z,(e=>e.totalPriceStringWithInterval)),b=(0,l.Kw)(h.Z,(e=>e.compute)),w=(0,l.Kw)(h.Z,(e=>!!e.compute_subscription_id)),y=(0,l.Kw)(h.Z,(e=>!!e.storage_subscription_id)),N=(0,l.Kw)(h.Z,(e=>e.creation_date)),C=(0,l.Kw)(h.Z,(e=>e.instance_region)),k=(0,l.Kw)(h.Z,(e=>e.storage)),S=(0,l.Kw)(h.Z,(e=>e.is_local)),E=null!==g&&void 0!==g&&g.user?"".concat(btoa("".concat(g.user,":").concat(g.pass))):"...",O=S?"HARDWARE LIMIT":"".concat(null===k||void 0===k?void 0:k.iops),P=N?new Date(N).toLocaleDateString():"N/A",{hostname:K}=window.location,T=j.Z.is_local_studio?"".concat(null!==(t=x.operationsApi)&&void 0!==t&&null!==(s=t.network)&&void 0!==s&&s.https?"https://":"http://").concat(K,":").concat(null===(n=x.operationsApi)||void 0===n||null===(r=n.network)||void 0===r?void 0:r.port):v,R=j.Z.is_local_studio?"".concat(null!==(d=x.customFunctions)&&void 0!==d&&null!==(u=d.network)&&void 0!==u&&u.https?"https://":"http://").concat(K,":").concat(null===(m=x.customFunctions)||void 0===m||null===(p=m.network)||void 0===p?void 0:p.port):v,z=(0,l.Kw)(h.Z,(e=>{var t;return null===(t=e.registration)||void 0===t?void 0:t.version})),[D,F]=(null===z||void 0===z?void 0:z.split("."))||[],L=parseFloat("".concat(D,".").concat(F));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"floating-card-header",children:"instance overview"}),(0,f.jsx)(c.Z,{className:"mt-3 mb-4 instance-details",children:(0,f.jsx)(o.Z,{children:(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(i.Z,{md:"4",xs:"12",children:(0,f.jsx)(A.Z,{header:"Instance URL",className:"mb-3",children:(0,f.jsx)("div",{className:"nowrap-scroll",children:(0,f.jsx)(I.Z,{text:T})})})}),(0,f.jsx)(i.Z,{md:"4",xs:"12",children:(0,f.jsx)(A.Z,{header:"".concat(L>=4.2?"Applications":"Custom Functions"," URL"),className:"mb-3",children:(0,f.jsx)("div",{className:"nowrap-scroll",children:(0,f.jsx)(I.Z,{text:R})})})}),(0,f.jsx)(i.Z,{md:"4",xs:"12",children:(0,f.jsx)(A.Z,{header:"Instance Node Name (for clustering)",className:"mb-3",children:(0,f.jsx)("div",{className:"nowrap-scroll",children:_?(0,f.jsx)(I.Z,{text:_}):"clustering not enabled"})})}),!j.Z.is_local_studio&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{md:"4",xs:"12",children:(0,f.jsx)(A.Z,{header:"Instance API Auth Header (this user)",className:"mb-3",children:(0,f.jsx)("div",{className:"nowrap-scroll",children:(0,f.jsx)(I.Z,{text:E,beforeText:"Basic ",obscure:!0})})})}),(0,f.jsx)(i.Z,{md:"2",sm:"4",xs:"6",children:(0,f.jsx)(A.Z,{header:"Created",className:"mb-3",children:(0,f.jsx)("div",{className:"nowrap-scroll",children:P})})}),C&&(0,f.jsx)(i.Z,{md:"2",sm:"4",xs:"6",children:(0,f.jsx)(A.Z,{header:"Region",className:"mb-3",children:(0,f.jsx)("div",{className:"nowrap-scroll",children:C})})}),(0,f.jsx)(i.Z,{md:"2",sm:"4",xs:"6",children:(0,f.jsx)(A.Z,{header:"Total Price",className:"mb-3",children:(0,f.jsx)("div",{className:"nowrap-scroll",children:Z})})}),(0,f.jsx)(i.Z,{md:"2",sm:"4",xs:"6",children:(0,f.jsx)(A.Z,{header:"RAM",className:"mb-3",children:(0,f.jsxs)("div",{className:"nowrap-scroll",children:[null===b||void 0===b?void 0:b.compute_ram_string," ",w&&"(PREPAID)"]})})}),!S&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{md:"2",sm:"4",xs:"6",children:(0,f.jsx)(A.Z,{header:"Storage",className:"mb-3 text-nowrap",children:(0,f.jsxs)("div",{className:"nowrap-scroll",children:[null===k||void 0===k?void 0:k.data_volume_size_string," ",y&&"(PREPAID)"]})})}),(0,f.jsx)(i.Z,{md:"2",sm:"4",xs:"6",children:(0,f.jsx)(A.Z,{header:"Disk IOPS",className:"mb-3 text-nowrap",children:(0,f.jsx)("div",{className:"nowrap-scroll",children:O})})})]})]})]})})})]})};var D=s(7377),F=s(4220),L=s(2261),U=s(2174),M=s(4130),V=s(8190);const B=function(e){let{instanceConfig:t}=e;const s=(0,l.Kw)(_.Z,(e=>e.theme));return(0,f.jsx)(V.Z,{placeholder:t,height:"calc(100vh - 580px)",theme:"light_mitsuketa_tribute",viewOnly:!0,colors:{background:"transparent",default:"dark"===s?"#aaa":"#000",colon:"dark"===s?"#aaa":"#000",keys:"dark"===s?"#aaa":"#000",string:"#13c664",number:"#ea4c89",primitive:"#ffa500"},style:{warningBox:{display:"none"}},locale:M.Z,width:"100%",confirmGood:!1,waitAfterKeyPress:3e4})};var Y=s(7093);const q=function(){return(0,f.jsx)("div",{className:"configLoader",children:(0,f.jsx)("i",{className:"fa fa-spinner fa-spin"})})},H={path:"config",link:"config",label:"config",icon:"wrench",iconCode:"f0ad"};const W=function(){const{customer_id:e,compute_stack_id:t}=(0,d.UO)(),s=(0,l.Kw)(_.Z,(e=>e.auth)),m=(0,l.Kw)(_.Z,(e=>e.theme)),x=(0,l.Kw)(h.Z,(e=>e.auth),[t]),v=(0,l.Kw)(h.Z,(e=>e.url),[t]),j=(0,l.Kw)(_.Z,(e=>{var t;return null===(t=e.customer)||void 0===t?void 0:t.stripe_id})),g=(0,l.Kw)(h.Z,(e=>e.is_local),[t]),Z=(0,l.Kw)(h.Z,(e=>{var t;return parseFloat(null===(t=e.registration)||void 0===t?void 0:t.version)>=4?"nats":"socketcluster"}),[t]),b=(0,l.Kw)(h.Z,(e=>e.compute_subscription_id),[t]),w=(0,l.Kw)(h.Z,(e=>e.storage_subscription_id),[t]),y=(0,l.Kw)(_.Z,(t=>{var s,n;return null===(s=t.auth)||void 0===s||null===(n=s.orgs)||void 0===n?void 0:n.find((t=>{var s;return(null===(s=t.customer_id)||void 0===s?void 0:s.toString())===e}))}),[e]),N="owner"===(null===y||void 0===y?void 0:y.status),[S,E]=(0,n.useState)(!1),[P,K]=(0,n.useState)(!1),[T,A]=(0,n.useState)(""),I=(0,l.Kw)(_.Z,(e=>{var t;return(null===(t=e.subscriptions[g?"local_compute":"cloud_compute"])||void 0===t?void 0:t.filter((e=>!e.value.compute_subscription_name||e.value.compute_quantity_available)))||[]})),M=(0,l.Kw)(_.Z,(e=>{var t,s;return(null===(t=e.subscriptions)||void 0===t||null===(s=t.cloud_storage)||void 0===s?void 0:s.filter((e=>!e.value.storage_subscription_name||e.value.storage_quantity_available)))||[]})),[V,H]=(0,n.useState)(!!b),[W,G]=(0,n.useState)(!!w);return p()((async()=>{s&&e&&j&&(0,U.Z)({auth:s,customer_id:e,stripe_id:j})}),[s,e,j]),p()((async()=>{if(x&&v){A("..."),K(!1);const e=await(0,Y.Z)({auth:x,url:v});if(!e.error){const t="nats"===Z?e.clustering.nodeName:e.NODE_NAME;A(t),K(e)}}}),[x]),S&&"Restarting"!==S?(0,f.jsx)(D.Z,{header:"".concat(S," Instance"),spinner:!0}):(0,f.jsxs)(a.Z,{id:"config",children:[(0,f.jsx)(i.Z,{xs:"12",children:(0,f.jsx)(u.SV,{onError:(e,t)=>(0,L.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:F.Z,children:(0,f.jsx)(z,{clusterNodeName:T,instanceConfig:P})})}),N&&"akamai"!==m&&(0,f.jsxs)(i.Z,{lg:"3",sm:"6",xs:"12",children:[(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)("span",{className:"floating-card-header",children:"update ram"})}),(0,f.jsx)(i.Z,{className:"text-end",children:(!!b||!!I.length)&&(0,f.jsxs)("span",{className:"floating-card-header",children:["prepaid:"," ",(0,f.jsx)(r.Z,{id:"showPrepaidCompute",color:"link",onClick:()=>H(!V),children:(0,f.jsx)("i",{className:"fa fa-lg fa-toggle-".concat(V?"on":"off")})})]})})]}),(0,f.jsx)(c.Z,{className:"my-3",children:(0,f.jsx)(o.Z,{children:(0,f.jsx)(u.SV,{onError:(e,t)=>(0,L.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:F.Z,children:P?(0,f.jsx)(k,{setInstanceAction:E,showPrepaidCompute:V}):(0,f.jsx)(q,{})})})})]}),N&&!g&&"akamai"!==m&&(0,f.jsxs)(i.Z,{lg:"3",sm:"6",xs:"12",children:[(0,f.jsxs)(a.Z,{children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)("span",{className:"floating-card-header",children:"update storage"})}),(0,f.jsx)(i.Z,{className:"text-end",children:(!!w||!!M.length)&&(0,f.jsxs)("span",{className:"floating-card-header",children:["prepaid:"," ",(0,f.jsx)(r.Z,{id:"showPrepaidStorage",color:"link",onClick:()=>G(!W),children:(0,f.jsx)("i",{className:"fa fa-lg fa-toggle-".concat(W?"on":"off")})})]})})]}),(0,f.jsx)(c.Z,{className:"my-3",children:(0,f.jsx)(o.Z,{children:(0,f.jsx)(u.SV,{onError:(e,t)=>(0,L.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:F.Z,children:P?(0,f.jsx)(C,{setInstanceAction:E,showPrepaidStorage:W}):(0,f.jsx)(q,{})})})})]}),N&&(0,f.jsxs)(i.Z,{lg:"3",sm:"6",xs:"12",children:[(0,f.jsx)("span",{className:"floating-card-header",children:"remove instance"}),(0,f.jsx)(c.Z,{className:"my-3",children:(0,f.jsx)(o.Z,{children:(0,f.jsx)(u.SV,{onError:(e,t)=>(0,L.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:F.Z,children:(0,f.jsx)(O,{setInstanceAction:E,instanceAction:S})})})})]}),(0,f.jsxs)(i.Z,{lg:"3",sm:"6",xs:"12",children:[(0,f.jsx)("span",{className:"floating-card-header",children:"restart instance"}),(0,f.jsx)(c.Z,{className:"my-3",children:(0,f.jsx)(o.Z,{children:(0,f.jsx)(u.SV,{onError:(e,t)=>(0,L.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:F.Z,children:(0,f.jsx)(R,{setInstanceAction:E,instanceAction:S})})})})]}),(0,f.jsxs)(i.Z,{xs:"12",children:[(0,f.jsx)("span",{className:"floating-card-header",children:"instance config (read only)"}),(0,f.jsx)(c.Z,{className:"mt-3 mb-4 instance-details",children:(0,f.jsx)(o.Z,{children:(0,f.jsx)(u.SV,{onError:(e,t)=>(0,L.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:F.Z,children:P?(0,f.jsx)(B,{instanceConfig:P}):(0,f.jsx)(q,{})})})})]})]})}},1216:(e,t,s)=>{s.d(t,{Z:()=>a});s(7313);var n=s(6417);const a=function(){return(0,n.jsxs)("div",{className:"text-danger",children:[(0,n.jsx)("i",{children:"Your most recent card payment failed. Please update your card below."}),(0,n.jsx)("hr",{className:"mt-3 mb-2"})]})}},2589:(e,t,s)=>{s.d(t,{Z:()=>a});s(7313);var n=s(6417);const a=function(e){let{children:t,header:s,subheader:a,maxHeight:i="auto",minHeight:r="auto",className:c}=e;return(0,n.jsxs)("div",{className:"content-container ".concat(c),children:[(0,n.jsxs)("div",{className:"header-container",children:[(0,n.jsx)("span",{className:"header",children:s}),(0,n.jsx)("span",{className:"subheader",children:a})]}),(0,n.jsx)("div",{className:"auto"!==i?"scrollable":"",style:{maxHeight:i,minHeight:r},children:t})]})}},7266:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(7313),a=s(6782),i=s(5399),r=s(9327),c=s(6160),o=s(6417);const l=function(e){let{text:t,beforeText:s,afterText:l,obscure:d=!1}=e;const u=(0,c.VY)(),m=navigator.clipboard,p=(0,n.useCallback)((async e=>{e.stopPropagation(),await navigator.clipboard.writeText(t),u.success("Text copied to clipboard")}),[u,t]);return(0,o.jsxs)(a.Z,{className:"copyable-text-holder g-0",children:[m&&t&&(0,o.jsx)(i.Z,{className:"copy-icon",children:(0,o.jsx)(r.Z,{title:"Copy this value",onClick:p,color:"link",children:(0,o.jsx)("i",{className:"fa fa-copy text-small"})})}),(0,o.jsx)(i.Z,{className:"text-container",children:t?(0,o.jsxs)(o.Fragment,{children:[s,d?t.replace(/./g,"*"):t,l]}):(0,o.jsx)("span",{children:"\xa0"})})]})}},9105:(e,t,s)=>{s.d(t,{Z:()=>i});s(7313);var n=s(9327),a=s(6417);const i=function(e){let{disabled:t,label:s,onClick:i}=e;return(0,a.jsx)(n.Z,{onClick:i,title:s,block:!0,disabled:t,color:"danger",className:"mt-2",id:"visitCreditCard",children:s})}},7093:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(9859);const a=async e=>{let{auth:t,url:s}=e;return(0,n.Z)({operation:{operation:"get_configuration"},auth:t,url:s})}},8147:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(9859),a=s(5447);const i=async e=>{let{auth:t,url:s}=e;return a.Z.update((e=>{e.restarting=!0})),(0,n.Z)({operation:{operation:"restart"},auth:t,url:s})}},9858:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(576);const a=async e=>{let{auth:t,customer_id:s,compute_stack_id:a,is_verizon:i,is_akamai:r}=e;return(0,n.Z)({endpoint:i?"wl/removeWavelengthInstance":r?"removeAkamaiInstance":"removeInstance",method:"POST",payload:{customer_id:s,compute_stack_id:a,compute_stack_wl_id:a},auth:t})}},1781:(e,t,s)=>{s.d(t,{Z:()=>g});var n=s(7313),a=s(5192),i=s.n(a),r=s(6123),c=s.n(r),o=s(986);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var d=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},u.apply(this,arguments)}function m(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function p(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v(e);if(t){var a=v(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,s)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var j={children:i().node,type:i().string,size:i().oneOfType([i().number,i().string]),bsSize:i().string,valid:i().bool,invalid:i().bool,tag:o.iC,innerRef:i().oneOfType([i().object,i().func,i().string]),plaintext:i().bool,addon:i().bool,className:i().string,cssModule:i().object},f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(r,e);var t,s,a,i=_(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=i.call(this,e)).getRef=t.getRef.bind(x(t)),t.focus=t.focus.bind(x(t)),t}return t=r,(s=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"focus",value:function(){this.ref&&this.ref.focus()}},{key:"render",value:function(){var e=this.props,t=e.className,s=e.cssModule,a=e.type,i=void 0===a?"text":a,r=e.bsSize,l=e.valid,p=e.invalid,h=e.tag,_=e.addon,x=e.plaintext,v=e.innerRef,j=m(e,d),f=["switch","radio","checkbox"].indexOf(i)>-1,g="select"===i,Z="range"===i,b=h||(g||"textarea"===i?i:"input"),w="form-control";x?(w="".concat(w,"-plaintext"),b=h||"input"):Z?w="form-range":g?w="form-select":f&&(w=_?null:"form-check-input"),j.size&&/\D/g.test(j.size)&&((0,o.O4)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),r=j.size,delete j.size);var y=(0,o.mx)(c()(t,p&&"is-invalid",l&&"is-valid",!!r&&(g?"form-select-".concat(r):"form-control-".concat(r)),w),s);return("input"===b||h&&"function"===typeof h)&&(j.type="switch"===i?"checkbox":i),j.children&&!x&&"select"!==i&&"string"===typeof b&&"select"!==b&&((0,o.O4)('Input with a type of "'.concat(i,'" cannot have children. Please use "value"/"defaultValue" instead.')),delete j.children),n.createElement(b,u({},j,{ref:v,className:y,"aria-invalid":p}))}}])&&p(t.prototype,s),a&&p(t,a),Object.defineProperty(t,"prototype",{writable:!1}),r}(n.Component);f.propTypes=j;const g=f}}]);