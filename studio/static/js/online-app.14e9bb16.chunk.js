"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[7422],{8527:(e,n,s)=>{s.r(n),s.d(n,{default:()=>M});var t=s(7313),a=s(8467),i=s(7786),o=s(7387),r=s(4122),l=s(6160),c=s(9842),d=s(5733),p=s(6449),h=s(9266),u=s(511),m=s(7377),x=s(6417);const j=function(){return(0,x.jsx)(m.Z,{header:"HarperDB Studio Is Being Updated",body:"Please check back in a few minutes and get ready for a whole new batch of awesome!"})};var Z=s(4220),f=s(6140),v=s(2227),w=s(2982),b=s(9476),g=s(1007),_=s(8978);var y=s(8220),k=s(8149),A=s(3295),I=s(9326),W=s(6005);const z=(0,t.lazy)((()=>s.e(2467).then(s.bind(s,2471)))),E=(0,t.lazy)((()=>s.e(6150).then(s.bind(s,5313)))),S=(0,t.lazy)((()=>s.e(9803).then(s.bind(s,3929)))),P=(0,t.lazy)((()=>s.e(4058).then(s.bind(s,7661)))),K=(0,t.lazy)((()=>s.e(2578).then(s.bind(s,4904)))),C=(0,t.lazy)((()=>Promise.all([s.e(7409),s.e(7026)]).then(s.bind(s,9924)))),F=(0,t.lazy)((()=>Promise.all([s.e(9287),s.e(4250)]).then(s.bind(s,1412)))),N=(0,t.lazy)((()=>Promise.all([s.e(7409),s.e(9305)]).then(s.bind(s,3163)))),O=(0,t.lazy)((()=>Promise.all([s.e(9287),s.e(228),s.e(9926),s.e(6620)]).then(s.bind(s,2829)))),T=(0,t.lazy)((()=>Promise.all([s.e(7409),s.e(7896)]).then(s.bind(s,1224)))),B=(0,t.lazy)((()=>Promise.all([s.e(7409),s.e(6845)]).then(s.bind(s,7875)))),V={timeout:0,position:l.m7.BOTTOM_CENTER};let D;function H(e){const{customer_id:n}=(0,a.UO)();return e.auth.orgs.some((e=>e.customer_id===n))?(0,x.jsx)(a.j3,{}):(0,x.jsx)(a.Fg,{to:"/organization",replace:!0})}const M=function(){const e=document.querySelector('link[rel="canonical"]'),n=(0,a.s0)(),s=(0,l.VY)(),M=(0,a.TH)(),{search:R,pathname:U}=M,{redirect:q}=d.Z.parse(R),Y=(0,o.Kw)(p.Z,(e=>e.auth)),G=(0,o.Kw)(p.Z,(e=>e.theme)),J=(0,o.Kw)(p.Z,(e=>e.products)),L=(0,o.Kw)(p.Z,(e=>e.regions)),Q=(0,o.Kw)(p.Z,(e=>e.wavelengthRegions)),X=(0,o.Kw)(p.Z,(e=>e.akamaiRegions)),$=(0,o.Kw)(p.Z,(e=>e.version)),ee=(0,o.Kw)(p.Z,(e=>e.postmanCollection)),[ne,se]=(0,t.useState)(!0),[te,ae]=(0,t.useState)(!1),[ie,oe]=(0,h.Z)({}),re=null===ie||void 0===ie?void 0:ie.theme,le=null===Y||void 0===Y?void 0:Y.user_id,ce=le&&-1===(null===Y||void 0===Y?void 0:Y.email.indexOf("harperdb.io"))&&-1===(null===Y||void 0===Y?void 0:Y.email.indexOf("deliciousmonster.com")),de=(null===$||void 0===$?void 0:$.maintenance)&&ce;return i.ZP.initialize(u.Z.google_analytics_code),(0,t.useEffect)((()=>{i.ZP.send({hitType:"pageview",page:window.location.pathname+window.location.search})}),[M.pathname]),(0,t.useEffect)((()=>{(0,A.Z)(re)}),[re]),(0,t.useEffect)((()=>{ae((e=>{let{apiVersion:n}=e;if(n){let e=!1;try{const s=u.Z.studio_version.split("."),t=n.split("."),a=parseInt(s[0],10)<parseInt(t[0],10),i=parseInt(s[0],10)===parseInt(t[0],10)&&parseInt(s[1],10)<parseInt(t[1],10),o=parseInt(s[0],10)===parseInt(t[0],10)&&parseInt(s[1],10)===parseInt(t[1],10)&&parseInt(s[2],10)<parseInt(t[2],10);(a||i||o)&&(e=n)}catch(s){return!1}return e}return!1})({apiVersion:$.studio}))}),[$.studio]),(0,t.useEffect)((()=>{null!==Y&&void 0!==Y&&Y.email&&(window._kmq&&window._kmq.push(["identify",Y.email]),null!==Y&&void 0!==Y&&Y.update_password&&n("/update-password"),q&&n(q))}),[null===Y||void 0===Y?void 0:Y.email]),(0,t.useEffect)((()=>{te&&s.info("HarperDB Studio v".concat(te," is now available. Refresh to update."),V)}),[te]),(0,t.useEffect)((()=>{e.href=window.location.href}),[M,e]),(0,t.useEffect)((()=>{(0,y.Z)({auth:ie,location:M,navigate:n,setFetchingUser:se,setPersistedUser:oe,controller:D}),(0,I.Z)(re)}),[]),(0,r.Z)((()=>{J||(0,v.Z)(),L||(0,w.Z)(),Q||(0,b.Z)(),X||(0,W.Z)(),ee||(0,_.Z)()}),u.Z.refresh_content_interval),(0,r.Z)((()=>{(0,g.Z)(),(0,k.Z)({auth:Y,controller:D})}),u.Z.check_version_interval),(0,x.jsxs)("div",{className:"".concat(G," ").concat(u.Z.maintenance?"maintenance":""),children:[(0,x.jsxs)("div",{id:"app-container",children:[(0,x.jsx)(t.Suspense,{fallback:(0,x.jsx)(m.Z,{header:" ",spinner:!0}),children:(0,x.jsx)(z,{isMaintenance:de,loggedIn:!0})}),ne?(0,x.jsx)(m.Z,{header:"signing in",spinner:!0}):le?(0,x.jsx)(c.SV,{FallbackComponent:Z.Z,children:(0,x.jsx)(t.Suspense,{fallback:(0,x.jsx)(m.Z,{header:" ",spinner:!0}),children:(0,x.jsxs)(a.Z5,{children:[(0,x.jsx)(a.AW,{element:de?(0,x.jsx)(j,{}):(0,x.jsx)(K,{}),path:"/update-password"}),(0,x.jsx)(a.AW,{element:de?(0,x.jsx)(j,{}):(0,x.jsx)(B,{}),path:"/profile/*"}),(0,x.jsx)(a.AW,{element:de?(0,x.jsx)(j,{}):(0,x.jsx)(N,{}),path:"/resources/*"}),(0,x.jsxs)(a.AW,{element:de?(0,x.jsx)(j,{}):(0,x.jsx)(H,{auth:Y}),children:[(0,x.jsx)(a.AW,{element:(0,x.jsx)(T,{}),path:"/o/:customer_id/i/:compute_stack_id/*"}),(0,x.jsx)(a.AW,{element:(0,x.jsx)(O,{}),path:"/o/:customer_id/instances/:action?/:purchaseStep?"}),(0,x.jsx)(a.AW,{element:(0,x.jsx)(C,{}),path:"/o/:customer_id/*"})]}),(0,x.jsx)(a.AW,{element:de?(0,x.jsx)(j,{}):(0,x.jsx)(F,{}),path:"/:list?/:action?"}),(0,x.jsx)(a.AW,{element:(0,x.jsx)(a.Fg,{to:"/",replace:!0})})]})})}):(0,x.jsx)(c.SV,{FallbackComponent:f.Z,children:(0,x.jsx)(t.Suspense,{fallback:(0,x.jsx)(m.Z,{header:" ",spinner:!0}),children:(0,x.jsxs)(a.Z5,{children:[(0,x.jsx)(a.AW,{element:(0,x.jsx)(S,{}),path:"/"}),(0,x.jsx)(a.AW,{element:u.Z.maintenance?(0,x.jsx)(j,{}):(0,x.jsx)(E,{}),path:"/sign-up"}),(0,x.jsx)(a.AW,{element:de?(0,x.jsx)(j,{}):(0,x.jsx)(P,{}),path:"/reset-password"}),(0,x.jsx)(a.AW,{element:de?(0,x.jsx)(j,{}):(0,x.jsx)(N,{}),path:"/resources/*"}),(0,x.jsx)(a.AW,{path:"*",element:(0,x.jsx)(a.Fg,{to:"/?redirect=".concat(U).concat(R),replace:!0})})]})})})]}),(0,x.jsx)("div",{id:"app-bg-color"}),(0,x.jsxs)("div",{className:"version",children:["HarperDB Studio v",u.Z.studio_version,$.maintenance&&" - MAINTENANCE MODE"]})]})}}}]);