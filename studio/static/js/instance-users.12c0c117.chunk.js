"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[759],{6578:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var s=r(7313),n=r(6782),a=r(5399),o=r(8467),c=r(238),i=r(3516),l=r(1781),u=r(9327),d=r(8212),f=r(3672),p=r.n(f),h=r(7387),m=r(9842),y=r(5447),b=r(9481),v=r(1891),g=r(3517),x=r(4220),j=r(2261),w=r(5200),O=r(6417);const Z=function(e){let{setLastUpdate:t}=e;const r=(0,h.Kw)(y.Z,(e=>e.auth)),n=(0,h.Kw)(y.Z,(e=>e.url)),a=(0,h.Kw)(y.Z,(e=>e.users)),o=(0,h.Kw)(y.Z,(e=>e.roles)),f=(0,h.Kw)(y.Z,(e=>{var t;return parseFloat(null===(t=e.registration)||void 0===t?void 0:t.version)<3})),[Z,N]=(0,s.useState)({}),[S,k]=(0,s.useState)({}),C="224px";return p()((async()=>{const{submitted:e}=Z;if(e){const{username:e,password:s,role:o}=S;if(e&&o&&s)if((0,g.Z)(e))if(a.find((t=>t.username.toLowerCase()===e.toLowerCase())))N({error:"User already exists"});else{N({processing:!0});const a=await(0,b.Z)({auth:r,role:o,username:e,password:s,url:n});-1!==a.message.indexOf("successfully")?(t(Date.now()),N({success:a.message})):N({error:a.message})}else N({error:"usernames must have only letters, numbers, hyphens, and underscores"}),setTimeout((()=>N({})),2e3);else N({error:"All fields must be filled out"});setTimeout((()=>k({})),2e3)}}),[Z]),p()((()=>{N({})}),[S]),p()((()=>o&&k({...S,role:!1})),[o]),(0,s.useEffect)((()=>{(0,w.Z)({auth:r,url:n})}),[r,n]),(0,O.jsxs)(m.SV,{onError:(e,t)=>(0,j.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:x.Z,children:[(0,O.jsx)("span",{className:"floating-card-header",children:"add user"}),Z.processing?(0,O.jsx)(v.Z,{className:"my-3",height:C,status:"processing",header:"Adding User",subhead:"The Account Airedale Is A Good Boy"}):Z.success?(0,O.jsx)(v.Z,{className:"my-3",height:C,status:"success",header:"Success!",subhead:Z.success}):Z.error?(0,O.jsx)(v.Z,{className:"my-3",height:C,status:"error",header:Z.error,subhead:"Please try again"}):(0,O.jsx)(c.Z,{className:"my-3",children:(0,O.jsxs)(i.Z,{children:[(0,O.jsx)(l.Z,{id:"username",type:"text",className:"mb-2 text-center",name:"username",placeholder:"username",value:S.username||"",onChange:e=>k({...S,username:e.target.value})}),(0,O.jsx)(l.Z,{id:"password",type:"text",className:"mb-2 text-center",name:"password",placeholder:"password",value:S.password||"",onChange:e=>k({...S,password:e.target.value})}),(0,O.jsx)(d.ZP,{className:"react-select-container",classNamePrefix:"react-select",onChange:e=>{let{value:t}=e;return k({...S,role:t})},options:o&&o.map((e=>({label:e.role,value:f?e.id:e.role}))),value:o&&S.role&&o.find((e=>e.value===S.role)),isSearchable:!1,isClearable:!1,isLoading:!o,placeholder:"select a role",styles:{placeholder:e=>({...e,textAlign:"center",width:"100%",color:"#BCBCBC"})}}),(0,O.jsx)(u.Z,{id:"addInstanceUser",color:"success",className:"mt-3",block:!0,onClick:()=>N({submitted:!0}),children:"Add User"})]})})]})};var N=r(7377);const S=(0,s.lazy)((()=>Promise.all([r.e(110),r.e(196)]).then(r.bind(r,8351)))),k=(0,s.lazy)((()=>r.e(40).then(r.bind(r,7211))));const C=function(){const{username:e}=(0,o.UO)(),[t,r]=(0,s.useState)(!0);return(0,O.jsxs)(n.Z,{children:[(0,O.jsx)(a.Z,{xl:"3",lg:"4",md:"5",xs:"12",children:(0,O.jsx)(Z,{setLastUpdate:r})}),(0,O.jsx)(a.Z,{xl:"9",lg:"8",md:"7",xs:"12",className:"pb-5",children:(0,O.jsx)(s.Suspense,{fallback:(0,O.jsx)(N.Z,{header:" ",spinner:!0}),children:e?(0,O.jsx)(k,{}):(0,O.jsx)(S,{lastUpdate:t,setLastUpdate:r})})})]})}},1891:(e,t,r)=>{r.d(t,{Z:()=>o});r(7313);var s=r(238),n=r(3516),a=r(6417);const o=function(e){let{header:t,subhead:r=" ",height:o,status:c,className:i}=e;return(0,a.jsx)(s.Z,{className:"form-status ".concat(i),children:(0,a.jsxs)(n.Z,{className:"text-center",style:{height:o},children:[(0,a.jsx)("div",{className:"text-bold",children:t}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)("i",{className:"fa fa-lg ".concat("processing"===c?"fa-spinner fa-spin text-purple":"success"===c?"fa-check-circle text-purple":"fa-exclamation-triangle text-danger")})}),(0,a.jsx)("div",{className:"text-grey",children:r})]})})}},9481:(e,t,r)=>{r.d(t,{Z:()=>n});var s=r(9859);const n=async e=>{let{auth:t,role:r,username:n,password:a,url:o}=e;return(0,s.Z)({operation:{operation:"add_user",role:r,username:n,password:a,active:!0},auth:t,url:o})}},5200:(e,t,r)=>{r.d(t,{Z:()=>a});var s=r(9859),n=r(5447);const a=async e=>{let{auth:t,url:r}=e;const a=await(0,s.Z)({operation:{operation:"list_roles"},auth:t,url:r}),o=[...Array.isArray(a)?a:[]].sort(((e,t)=>e.role.toLowerCase()>t.role.toLowerCase()?1:-1));return n.Z.update((e=>{e.roles=o})),o}},3517:(e,t,r)=>{r.d(t,{Z:()=>s});const s=e=>e.match(/^[-a-zA-Z0-9_]+$/)},1781:(e,t,r)=>{r.d(t,{Z:()=>x});var s=r(7313),n=r(5192),a=r.n(n),o=r(6123),c=r.n(o),i=r(986);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var u=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},d.apply(this,arguments)}function f(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function p(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=b(e);if(t){var n=b(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,r)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var v={children:a().node,type:a().string,size:a().oneOfType([a().number,a().string]),bsSize:a().string,valid:a().bool,invalid:a().bool,tag:i.iC,innerRef:a().oneOfType([a().object,a().func,a().string]),plaintext:a().bool,addon:a().bool,className:a().string,cssModule:a().object},g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(o,e);var t,r,n,a=m(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getRef=t.getRef.bind(y(t)),t.focus=t.focus.bind(y(t)),t}return t=o,(r=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"focus",value:function(){this.ref&&this.ref.focus()}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.cssModule,n=e.type,a=void 0===n?"text":n,o=e.bsSize,l=e.valid,p=e.invalid,h=e.tag,m=e.addon,y=e.plaintext,b=e.innerRef,v=f(e,u),g=["switch","radio","checkbox"].indexOf(a)>-1,x="select"===a,j="range"===a,w=h||(x||"textarea"===a?a:"input"),O="form-control";y?(O="".concat(O,"-plaintext"),w=h||"input"):j?O="form-range":x?O="form-select":g&&(O=m?null:"form-check-input"),v.size&&/\D/g.test(v.size)&&((0,i.O4)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),o=v.size,delete v.size);var Z=(0,i.mx)(c()(t,p&&"is-invalid",l&&"is-valid",!!o&&(x?"form-select-".concat(o):"form-control-".concat(o)),O),r);return("input"===w||h&&"function"===typeof h)&&(v.type="switch"===a?"checkbox":a),v.children&&!y&&"select"!==a&&"string"===typeof w&&"select"!==w&&((0,i.O4)('Input with a type of "'.concat(a,'" cannot have children. Please use "value"/"defaultValue" instead.')),delete v.children),s.createElement(w,d({},v,{ref:b,className:Z,"aria-invalid":p}))}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(s.Component);g.propTypes=v;const x=g}}]);