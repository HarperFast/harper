"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[896],{5920:(e,t,a)=>{a.r(t),a.d(t,{default:()=>de});var s=a(7313),r=a(8467),n=a(7387),o=a(6160),i=a(3672),l=a.n(i),c=a(4122),u=a(6449),d=a(5447),p=a(2190),m=a(5708),h=a(2742),v=a(1613),_=a(8212),b=a(2135),g=a(9842),f=a(4220),Z=a(2261),y=a(511),j=a(6417);const x=function(e){let{routes:t=[]}=e;const{compute_stack_id:a,customer_id:s}=(0,r.UO)(),[o]=(0,p.Z)({}),i=(0,r.s0)(),l=(0,r.TH)(),c=(0,n.Kw)(d.Z,(e=>e.defaultBrowseURL)),x=(0,n.Kw)(u.Z,(e=>{var t;return e.alarms&&(null===(t=e.alarms[a])||void 0===t?void 0:t.alarmCounts.total)}),[a]),{options:w,activeOption:k}=(0,n.Kw)(u.Z,(e=>{const t=e.instances&&e.instances.find((e=>e.compute_stack_id===a)),s=e.instances&&e.instances.filter((e=>e.compute_stack_id!==a));return{options:s&&s.map((e=>({label:(0,j.jsxs)("span",{children:[(0,j.jsx)("i",{className:"d-none d-sm-inline-block fa me-2 fa-".concat(e.is_local?"server":["CREATE_IN_PROGRESS","UPDATE_IN_PROGRESS","CONFIGURING_NETWORK"].includes(e.status)?"circle-exclamation":"cloud"," ").concat(["CREATE_IN_PROGRESS","UPDATE_IN_PROGRESS","CONFIGURING_NETWORK"].includes(e.status)&&"opacity-25")}),e.instance_name," ",["CREATE_IN_PROGRESS","UPDATE_IN_PROGRESS","CONFIGURING_NETWORK"].includes(e.status)&&"(".concat(e.status.replace(/_/g," ").toLowerCase(),")")]}),value:e.compute_stack_id,has_auth:o[e.compute_stack_id],is_unavailable:["CREATE_IN_PROGRESS","UPDATE_IN_PROGRESS","CONFIGURING_NETWORK"].includes(e.status)}))),activeOption:{label:(0,j.jsxs)("span",{children:[(0,j.jsx)("i",{className:"d-none d-sm-inline-block fa me-2 fa-".concat(t?null!==t&&void 0!==t&&t.is_local?"server":"cloud":"")}),null===t||void 0===t?void 0:t.instance_name]}),value:a}}}),[a]),N="/o/".concat(s,"/i/").concat(a),S=l.pathname.split("/i/".concat(a))[1].split("/")[1],E=null===t||void 0===t?void 0:t.find((e=>e.link===S));return(0,j.jsx)(g.SV,{onError:(e,t)=>(0,Z.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:f.Z,children:(0,j.jsxs)(m.Z,{className:"app-subnav",children:[!y.Z.is_local_studio&&(0,j.jsx)(h.Z,{navbar:!0,className:"instance-select",children:(0,j.jsx)(_.ZP,{className:"react-select-container",classNamePrefix:"react-select",onChange:e=>{let{value:t,has_auth:a,is_unavailable:r}=e;return!r&&i(a?"/o/".concat(s,"/i/").concat(t,"/").concat(null===E||void 0===E?void 0:E.link):"/o/".concat(s,"/instances/login"))},options:w||[],value:k,defaultValue:k.value,isSearchable:!1,isClearable:!1,isLoading:!w,noOptionsMessage:()=>"No other instances available"})}),(0,j.jsx)(h.Z,{navbar:!0,className:"instance-nav d-none d-lg-flex",children:null===t||void 0===t?void 0:t.map((e=>(0,j.jsx)(v.Z,{children:(0,j.jsxs)(b.OL,{title:e.link,className:"nav-link",to:"".concat(N,"/").concat("browse"===e.link&&c?"".concat(e.link,"/").concat(c):e.link),children:[(0,j.jsx)("i",{className:"d-none d-sm-inline-block fa me-2 fa-".concat(e.icon)}),e.label||e.link,!!x&&"status"===e.link&&(0,j.jsx)("span",{className:"badge",children:x})]})},e.path)))}),(0,j.jsx)(h.Z,{navbar:!0,className:"instance-nav-select d-flex d-lg-none",children:(0,j.jsx)(_.ZP,{className:"react-select-container",classNamePrefix:"react-select",width:"200px",onChange:e=>{let{value:t}=e;return i("".concat(N,"/").concat(t))},options:null===t||void 0===t?void 0:t.map((e=>({label:(0,j.jsxs)("span",{children:[(0,j.jsx)("i",{className:"d-none d-sm-inline-block fa me-2 fa-".concat(e.icon)}),e.label]}),value:e.link}))),isLoading:!(null!==E&&void 0!==E&&E.link),value:{label:(0,j.jsxs)("span",{children:[(0,j.jsx)("i",{className:"d-none d-sm-inline-block fa me-2 fa-".concat(null===E||void 0===E?void 0:E.icon)}),null===E||void 0===E?void 0:E.label]}),value:null===E||void 0===E?void 0:E.link},defaultValue:null===E||void 0===E?void 0:E.link,isSearchable:!1,isClearable:!1})})]})})};var w=a(238),k=a(3516),N=a(5192),S=a.n(N),E=a(6123),O=a.n(E),P=a(986),T=["className","cssModule","tag"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},R.apply(this,arguments)}function C(e,t){if(null==e)return{};var a,s,r=function(e,t){if(null==e)return{};var a,s,r={},n=Object.keys(e);for(s=0;s<n.length;s++)a=n[s],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)a=n[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var A={className:S().string,cssModule:S().object,tag:P.iC};function I(e){var t=e.className,a=e.cssModule,r=e.tag,n=void 0===r?"div":r,o=C(e,T),i=(0,P.mx)(O()(t,"card-title"),a);return s.createElement(n,R({},o,{className:i}))}I.propTypes=A;const K=I;var z=a(6782),F=a(5399),U=a(9496),q=a(35),G=a(8659);const B=(0,s.lazy)((()=>Promise.all([a.e(110),a.e(849)]).then(a.bind(a,7962)))),D=(0,s.lazy)((()=>a.e(3).then(a.bind(a,6201)))),L=(0,s.lazy)((()=>Promise.all([a.e(424),a.e(641)]).then(a.bind(a,9716)))),W=(0,s.lazy)((()=>Promise.all([a.e(718),a.e(938)]).then(a.bind(a,638)))),V=(0,s.lazy)((()=>a.e(6).then(a.bind(a,2122)))),H={tableData:[],dataTableColumns:[],filtered:[],sorted:[],page:0,pageSize:20,autoRefresh:!1,showFilter:!1,newEntityAttributes:!1,hashAttribute:!1};function M(e){let{table:t}=e;return(0,j.jsx)(w.Z,{className:"my-3 missing-primary-key",children:(0,j.jsxs)(k.Z,{children:[(0,j.jsx)(K,{children:"No Primary Key"}),(0,j.jsx)("i",{className:"fa fa-warning mt-3"}),(0,j.jsxs)("span",{className:"mt-3",children:["The table ","'".concat(t,"'")," does not have a primary key. The HarperDB Studio does not currently support tables without a primary key defined. Please see the"," ",(0,j.jsx)("a",{href:"https://docs.harperdb.io/docs",target:"_blank",rel:"noreferrer",children:"HarperDB documention"})," ","to see the standard HarperDB querying options."]})]})})}const Y=function(){var e,t,a,o,i;const l=(0,r.s0)(),c=(0,r.TH)(),{schema:u,table:m,action:h,customer_id:v,compute_stack_id:_}=(0,r.UO)(),[b]=(0,p.Z)({}),y=b&&b[_],x=(0,n.Kw)(d.Z,(e=>e.url)),w=(0,n.Kw)(d.Z,(e=>e.registration)),k=null===w||void 0===w?void 0:w.version,[N,S]=(null===k||void 0===k?void 0:k.split("."))||[],E="".concat(N,".").concat(S),O=(0,n.Kw)(d.Z,(e=>e.structure)),[P,T]=(0,s.useState)({schemas:[],tables:[],activeTable:!1}),[R,C]=(0,s.useState)(H),A="/o/".concat(v,"/i/").concat(_,"/browse"),I=(null===(e=b[_])||void 0===e?void 0:e.super)||!0===(null===(t=b[_])||void 0===t?void 0:t.structure),K=I||(null===(a=b[_])||void 0===a?void 0:a.structure)&&(null===(o=b[_])||void 0===o||null===(i=o.structure)||void 0===i?void 0:i.includes(u)),Y=I?"Please ".concat(u&&P.tables&&!P.tables.length||!P.schemas.length?"create":"choose"," a ").concat(u?"table":"".concat(E>=4.2?"database":"schema")):"This user has not been granted access to any tables. A super-user must update this user's role.",[J,$]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{!async function(){if(m){const e=await(0,U.Z)({auth:y,url:x,schema:u,table:m});$(Boolean(e.hash_attribute))}}()}),[y,x,u,m]),(0,s.useEffect)((()=>{if(O){const e=Object.keys(O),t=Object.keys((null===O||void 0===O?void 0:O[u])||{});if(!e.length&&"/browse"!==c.pathname)return T({schemas:[],tables:[],activeTable:!1}),void l("/o/".concat(v,"/i/").concat(_,"/browse"));if(e.length&&!e.includes(u))return void l("/o/".concat(v,"/i/").concat(_,"/browse/").concat(e[0]));if(t.length&&!t.includes(m))return void l("/o/".concat(v,"/i/").concat(_,"/browse/").concat(u,"/").concat(t[0]));P.activeTable!=="".concat(_,":").concat(u,":").concat(m)&&C(H),T({schemas:e,tables:t,activeTable:"".concat(_,":").concat(u,":").concat(m)})}}),[O,u,m,_]),(0,s.useEffect)((()=>{(0,G.Z)({auth:y,url:x})}),[y,x,u,m]),(0,j.jsxs)(z.Z,{id:"browse",children:[(0,j.jsx)(F.Z,{xl:"3",lg:"4",md:"5",xs:"12",children:(0,j.jsxs)(g.SV,{onError:(e,t)=>(0,Z.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:f.Z,children:[(0,j.jsx)(D,{activeItem:u,items:P.schemas,baseUrl:A,itemType:E>=4.2?"database":"schema",showForm:I}),u&&(0,j.jsx)(D,{activeItem:m,items:P.tables,activeSchema:u,baseUrl:"".concat(A,"/").concat(u),itemType:"table",showForm:K}),(0,j.jsx)(V,{centerText:!0,label:"refresh ".concat(E>=4.2?"databases":"schemas"," and tables")})]})}),(0,j.jsx)(F.Z,{xs:"12",className:"d-block d-md-none",children:(0,j.jsx)("hr",{})}),(0,j.jsx)(F.Z,{xl:"9",lg:"8",md:"7",xs:"12",children:(0,j.jsx)(g.SV,{onError:(e,t)=>(0,Z.Z)({error:{message:e.message,componentStack:t}}),FallbackComponent:f.Z,children:u&&m&&"csv"===h&&P.activeTable?(0,j.jsx)(W,{}):u&&m&&h&&P.activeTable?(0,j.jsx)(L,{newEntityAttributes:R.newEntityAttributes,hashAttribute:R.hashAttribute}):u&&m&&P.activeTable?(0,j.jsx)(B,{activeTable:P.activeTable,tableState:R,setTableState:C}):u&&m&&!J?(0,j.jsx)(M,{}):(0,j.jsx)(q.Z,{headline:Y,icon:(0,j.jsx)("i",{className:"fa fa-exclamation-triangle text-warning"})})})})]})},J=(0,s.lazy)((()=>Promise.all([a.e(446),a.e(60)]).then(a.bind(a,7606)))),$=(0,s.lazy)((()=>Promise.all([a.e(110),a.e(287),a.e(446),a.e(255)]).then(a.bind(a,9951)))),Q=(0,s.lazy)((()=>Promise.all([a.e(110),a.e(287),a.e(463)]).then(a.bind(a,1608)))),X=(0,s.lazy)((()=>Promise.all([a.e(723),a.e(490)]).then(a.bind(a,7535)))),ee=(0,s.lazy)((()=>a.e(25).then(a.bind(a,8244)))),te=(0,s.lazy)((()=>a.e(759).then(a.bind(a,6578)))),ae=(0,s.lazy)((()=>a.e(701).then(a.bind(a,7752)))),se=(0,s.lazy)((()=>Promise.all([a.e(110),a.e(424),a.e(442)]).then(a.bind(a,3218)))),re=e=>{let{super_user:t,version:a=null}=e;const s={element:(0,j.jsx)(Y,{}),path:"browse/:schema?/:table?/:action?/:hash?",link:"browse",label:"browse",icon:"list"},r={element:(0,j.jsx)($,{}),path:"query",link:"query",label:"query",icon:"search"},n={element:(0,j.jsx)(te,{}),path:"users/:username?",link:"users",label:"users",icon:"users"},o={element:(0,j.jsx)(ae,{}),path:"roles/:role_id?",link:"roles",label:"roles",icon:"check-square"},i={element:(0,j.jsx)(J,{}),path:"charts",link:"charts",label:"charts",icon:"chart-line"},l={element:(0,j.jsx)(Q,{}),path:"replication",link:"replication",label:"replication",icon:"cubes"},c={element:(0,j.jsx)(se,{}),path:"functions/:action?/:project?/:type?/:file?",link:"functions",label:"functions",icon:"project-diagram"},u={element:(0,j.jsx)(se,{}),path:"applications",link:"applications",label:"applications",icon:"project-diagram"},d={element:(0,j.jsx)(ee,{}),path:"status",link:"status",label:"status",icon:"tachometer-alt"},p={element:(0,j.jsx)(X,{}),path:"config",link:"config",label:"config",icon:"wrench"};let m=!1;if(a){const[e,t]=(null===a||void 0===a?void 0:a.split("."))||[],s=parseInt(e,10),r=parseInt(t,10);m=parseFloat("".concat(s,".").concat(r))>=4.2}return y.Z.is_local_studio&&t?[s,r,n,o,l,m?u:c,d,p]:t?[s,r,n,o,i,l,m?u:c,d,p]:y.Z.is_local_studio?[s,r,i]:[s,r]};var ne=a(7377),oe=a(3230),ie=a(6047),le=a(8751),ce=a(2230),ue=a(5491);const de=function(){const{compute_stack_id:e,customer_id:t}=(0,r.UO)(),a=(0,o.VY)(),i=(0,r.s0)(),[m,h]=(0,s.useState)(!0),[v,_]=(0,p.Z)({}),b=v&&v[e],g=(0,n.Kw)(u.Z,(e=>e.auth)),f=(0,n.Kw)(u.Z,(e=>{var a,s;return null===(a=e.auth)||void 0===a||null===(s=a.orgs)||void 0===s?void 0:s.find((e=>{var a;return(null===(a=e.customer_id)||void 0===a?void 0:a.toString())===t}))})),Z=(0,n.Kw)(u.Z,(e=>e.products)),w=(0,n.Kw)(u.Z,(e=>e.regions)),k=(0,n.Kw)(u.Z,(e=>e.subscriptions)),N=(0,n.Kw)(u.Z,(e=>e.instances)),S=(0,n.Kw)(u.Z,(t=>e&&t.instances&&t.instances.find((t=>t.compute_stack_id===e))),[e]),E=(0,n.Kw)(d.Z,(e=>e.url)),O=(0,n.Kw)(d.Z,(e=>e.restarting)),P=(0,n.Kw)(d.Z,(e=>e.registration)),T=re({customer_id:t,super_user:null===b||void 0===b?void 0:b.super,version:null===P||void 0===P?void 0:P.version}),[R,C]=(0,s.useState)(!1);return l()((()=>{!y.Z.is_local_studio&&g&&t&&(0,ie.Z)({auth:g,customer_id:t})}),[g,t,y.Z.is_local_studio]),l()((()=>{!y.Z.is_local_studio&&g&&t&&(0,le.Z)({auth:g,customer_id:t})}),[g,t,N,y.Z.is_local_studio]),l()((()=>{g&&Z&&w&&k&&t&&(null===N||void 0===N||!N.length)&&(0,oe.Z)({auth:g,customer_id:t,products:Z,regions:w,subscriptions:k,instanceCount:null===N||void 0===N?void 0:N.length})}),[g,Z,w,t,k,N]),l()((async()=>{if(S&&b){d.Z.update((()=>S));const{error:e}=await(0,G.Z)({auth:b,url:S.url});await(0,ue.Z)({auth:b,url:S.url}),h(!1),e&&setTimeout((()=>i("/o/".concat(t,"/instances"))),10)}}),[S]),l()((()=>{R&&E&&null!==b&&void 0!==b&&b.super?a.success("Your instance user role has been upgraded to super_user"):R&&E&&a.success("Your instance user role has been downgraded to standard")}),[a,null===b||void 0===b?void 0:b.super]),l()((()=>C(!0)),(()=>C(!1)),[]),(0,c.Z)((async()=>{if(E){var s,r;const l=await(0,ce.Z)({auth:b,url:E});if(l.error&&"Network request failed"!==l.message&&!O)a.error("Unable to connect to instance."),i("/o/".concat(t,"/instances"));else if(!l.error&&O)d.Z.update((e=>{e.restarting=!1}));else if(!l.error&&(null===b||void 0===b?void 0:b.super)!==(null===(s=l.role)||void 0===s||null===(r=s.permission)||void 0===r?void 0:r.super_user)){var n,o;_({...v,[e]:{...b,super:null===(n=l.role)||void 0===n||null===(o=n.permission)||void 0===o?void 0:o.super_user}})}}}),y.Z.refresh_content_interval),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x,{routes:T}),(y.Z.is_local_studio||f&&N)&&!m?(0,j.jsx)(s.Suspense,{fallback:(0,j.jsx)(ne.Z,{header:" ",spinner:!0}),children:(0,j.jsxs)(r.Z5,{children:[T.map((e=>(0,j.jsx)(r.AW,{path:e.path,element:e.element},e.path))),(0,j.jsx)(r.AW,{path:"*",element:(0,j.jsx)(r.Fg,{to:T[0].path,replace:!0})})]})}):(0,j.jsx)(ne.Z,{header:"loading instance",spinner:!0})]})}},35:(e,t,a)=>{a.d(t,{Z:()=>o});a(7313);var s=a(238),r=a(3516),n=a(6417);const o=function(e){let{headline:t,description:a,icon:o,warning:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"floating-card-header text-end",children:"\xa0"}),(0,n.jsx)(s.Z,{className:"my-3",children:(0,n.jsx)(r.Z,{children:(0,n.jsxs)("div",{className:"empty-prompt narrow",children:[o,t&&(0,n.jsx)("div",{className:"mt-3",children:t}),(0,n.jsx)("div",{className:"mt-3",children:a}),i&&(0,n.jsxs)("div",{className:"warning-text mt-3",children:["Warning: ",i]})]})})})]})}},1343:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(9859);const r=async e=>{let{auth:t,url:a}=e;return(0,s.Z)({operation:{operation:"describe_all"},auth:t,url:a})}},9496:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(9859);const r=async e=>{let{auth:t,url:a,schema:r,table:n,signal:o}=e;return(0,s.Z)({operation:{operation:"describe_table",schema:r,table:n},auth:t,url:a,signal:o})}},5491:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(9859),r=a(5447);const n=async e=>{let{auth:t,url:a}=e;const n=await(0,s.Z)({operation:{operation:"registration_info"},auth:t,url:a,timeout:5e3});return r.Z.update((e=>{e.registration=n.error?{}:n})),n}},2230:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(9859);const r=async e=>{let{auth:t,url:a}=e;return(0,s.Z)({operation:{operation:"user_info"},auth:t,url:a,timeout:5e3})}},8751:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(576),r=a(6449),n=a(2261),o=a(511);const i=e=>{let{alarms:t}=e;return Object.values(t).reduce(((e,t)=>(e[t.type.trim()]=(e[t.type.trim()]||0)+1,e.total+=1,e)),{total:0})},l=async e=>{let{auth:t,customer_id:a,signal:l,currentAlarmsLength:c}=e,u=null;try{if(u=await(0,s.Z)({endpoint:"getAlarms",method:"POST",payload:{customer_id:a},signal:l,auth:t}),u.error&&c)return r.Z.update((e=>{e.alarmsError=!0}));if(!Array.isArray(u)||u.error)return r.Z.update((e=>{e.alarms=[],e.alarmsError=!0}));const e=[...u].sort(((e,t)=>t.date-e.date)),n=Object.assign({},...e.map((e=>{var t;const a=null===(t=u)||void 0===t?void 0:t.filter((t=>t.compute_stack_id===e.compute_stack_id));return{[e.compute_stack_id]:{alarms:a,alarmCounts:i({alarms:a.filter((e=>e.date+1e3*o.Z.alarm_badge_threshold>Date.now()))})}}})));return r.Z.update((e=>{e.alarms=n,e.alarmsError=!1}))}catch(d){return(0,n.Z)({type:"lms data",status:"error",url:o.Z.lms_api_url,operation:"getAlarms",request:{customer_id:a},error:{catch:d.toString()},customer_id:a})}}},6047:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(576),r=a(6449),n=a(2261),o=a(511),i=a(2174);const l=async e=>{let{auth:t,customer_id:a}=e,l=null;try{var c;return l=await(0,s.Z)({endpoint:"getCustomer",method:"POST",payload:{customer_id:a},auth:t}),(0,i.Z)({auth:t,customer_id:a,stripe_id:null===(c=l)||void 0===c?void 0:c.stripe_id}),l.error||r.Z.update((e=>{var t;e.customer={...l,customer_id:a},e.hasCard=null===(t=l.stripe_payment_methods)||void 0===t?void 0:t[0]})),l}catch(u){return(0,n.Z)({type:"lms data",status:"error",url:o.Z.lms_api_url,operation:"getCustomer",request:{customer_id:a},error:{catch:u.toString()},customer_id:a})}}},3230:(e,t,a)=>{a.d(t,{Z:()=>c});var s=a(576),r=a(6449),n=a(1842);const o=e=>{let{is_local:t,wavelength_zone_id:a,cloud_provider:s}=e;switch(!0){case a:return"wavelength_compute";case t:return"local_compute";case"akamai"===s:return"akamai_compute";default:return"cloud_compute"}};var i=a(2261),l=a(511);const c=async e=>{let{auth:t,customer_id:a,products:c,regions:u,subscriptions:d,instanceCount:p=0}=e,m=null;try{if(m=await(0,s.Z)({endpoint:"getInstances",method:"POST",payload:{customer_id:a,user_id:t.user_id},auth:t}),Array.isArray(m)){const e=m.map((e=>{const t=(e=>{let{instance:t,products:a,regions:s,subscriptions:r}=e;try{var i,l;const e=t.compute_subscription_id?r[o(t)]:a[o(t)],c=null===e||void 0===e?void 0:e.find((e=>e.value.stripe_plan_id===t.stripe_plan_id&&(!t.compute_subscription_id||e.value.compute_subscription_id===t.compute_subscription_id))),u=t.storage_subscription_id?r.cloud_storage:a.cloud_storage,d=!t.is_local&&(null===u||void 0===u?void 0:u.find((e=>e.value.data_volume_size===t.data_volume_size&&e.value.stripe_storage_plan_id===t.stripe_storage_plan_id&&(!t.storage_subscription_id||e.value.storage_subscription_id===t.storage_subscription_id)))),p=parseFloat((null===c||void 0===c||null===(i=c.value)||void 0===i?void 0:i.compute_price)||0)+parseFloat((null===d||void 0===d||null===(l=d.value)||void 0===l?void 0:l.storage_price)||0),m=p?"$".concat((0,n.Z)(p.toFixed(2))):"FREE",h=t.compute_subscription_id&&t.storage_subscription_id?"PREPAID":p?"".concat(m,"/").concat(c.value.compute_interval):"FREE",v=!t.is_local&&s.find((e=>e.value===t.instance_region));return{compute:null===c||void 0===c?void 0:c.value,storage:null===d||void 0===d?void 0:d.value,totalPrice:p,totalPriceString:m,totalPriceStringWithInterval:h,region:v}}catch(c){return console.log(c)}})({instance:e,products:c,regions:u,subscriptions:d});return{...e,...t}})),t=e.sort(((e,t)=>e.instance_name>t.instance_name?1:-1));return r.Z.update((e=>{e.instances=t})),t}return!p&&r.Z.update((e=>{e.instances=[]}))}catch(h){return(0,i.Z)({type:"lms data",status:"error",url:l.Z.lms_api_url,operation:"getInstances",request:{customer_id:a},error:{catch:h.toString()},customer_id:a})}}},2174:(e,t,a)=>{a.d(t,{Z:()=>c});var s=a(576),r=a(6449),n=a(2261),o=a(8329),i=a(9274),l=a(511);const c=async e=>{let{auth:t,customer_id:a,stripe_id:c}=e;try{const e=await(0,s.Z)({endpoint:"getPrepaidSubscriptions",method:"POST",payload:{customer_id:a,stripe_id:c},auth:t});return!e.error&&r.Z.update((t=>{t.subscriptions={cloud_storage:(0,i.Z)(e.cloud_storage||[]),cloud_compute:(0,o.Z)(e.cloud_compute||[]),wavelength_compute:(0,o.Z)(e.wavelength_compute||[]),local_compute:(0,o.Z)(e.local_compute||[])}}))}catch(u){return(0,n.Z)({type:"lms data",status:"error",url:l.Z.lms_api_url,operation:"getPrepaidSubscriptions",error:{catch:u.toString()}})}}},9859:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(8093);const r=async e=>{let{operation:t,auth:a,url:r,timeout:n=0,authType:o,signal:i}=e;try{const e=new AbortController,u=setTimeout((()=>n?e.abort():null),n),d=await(0,s.he)(r,{signal:i||e.signal,method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",authorization:"token"===o?"Bearer ".concat(a.token):"Basic ".concat(btoa("".concat(a.user,":").concat(a.pass)))}});clearTimeout(u);const p=await d.json();var l,c;return p.error?{error:!0,message:p.error,type:"response",role_errors:null===(l=p.main_permissions)||void 0===l?void 0:l.join(", "),access_errors:null===(c=p.unauthorized_access)||void 0===c?void 0:c.map((e=>{var t,a,s,r,n,o;return{schema:e.schema,table:e.table,type:null!==(t=e.required_attribute_permissions)&&void 0!==t&&t.length?"attribute":"table",entity:null!==(a=e.required_attribute_permissions)&&void 0!==a&&a.length?null===(s=e.required_attribute_permissions[0])||void 0===s?void 0:s.attribute_name:e.table,permission:null!==(r=e.required_attribute_permissions)&&void 0!==r&&r.length?null===(n=e.required_attribute_permissions[0])||void 0===n?void 0:n.required_permissions.join(", "):null===(o=e.required_table_permissions)||void 0===o?void 0:o.join(", ")}}))}:200!==d.status?{error:!0,message:"Error of type ".concat(d.status),type:"status"}:p}catch(u){return{error:!0,message:u.message,type:"catch"}}}},3708:(e,t,a)=>{a.d(t,{Z:()=>s});const s=e=>{const t={},a=[];return e.error||Object.keys(e).sort().forEach(((s,r)=>{t[s]={},0===r&&a.push(s),Object.keys(e[s]).sort().forEach(((n,o)=>{0===o&&0===r&&a.push(n),t[s][n]={record_count:e[s][n].record_count,hashAttribute:e[s][n].hash_attribute}}))})),{structure:t,defaultBrowseURL:a.join("/")}}},8659:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(5447),r=a(1343),n=a(3708),o=a(5491);const i=async e=>{let{auth:t,url:a}=e;const i=await(0,r.Z)({auth:t,url:a}),l=await(0,o.Z)({auth:t,url:a});if(i.error)return{error:"Could not log into instance"};const{structure:c,defaultBrowseURL:u}=(0,n.Z)(i);return s.Z.update((e=>{e.auth=t,e.structure=c,e.defaultBrowseURL=u,e.loading=!1,e.registration=l})),{error:!1}}},2190:(e,t,a)=>{a.d(t,{Z:()=>s});const s=(0,a(8131).Z)("instanceAuths")},5447:(e,t,a)=>{a.d(t,{Z:()=>s});const s=new(a(7387).yh)({})},3672:(e,t,a)=>{var s=a(7313);function r(e,t,a){var r="function"===typeof t;s.useEffect((function(){var a,s=!0,n=e((function(){return s}));return Promise.resolve(n).then((function(e){a=e})),function(){s=!1,r&&t(a)}}),r?a:t)}e.exports=r,e.exports.useAsyncEffect=r},4122:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(7313),r=function(){};function n(e,t,a){var n=(0,s.useRef)(r);(0,s.useEffect)((function(){n.current=e})),(0,s.useEffect)((function(){a&&null!==t&&!1!==t&&n.current()}),[a]),(0,s.useEffect)((function(){if(null!==t&&!1!==t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])}}}]);