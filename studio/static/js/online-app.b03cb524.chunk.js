"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[422],{8527:(e,n,s)=>{s.r(n),s.d(n,{default:()=>V});var t=s(7313),a=s(8467),i=s(7786),r=s(7387),o=s(4122),l=s(6160),d=s(9842),c=s(5733),p=s(6449),h=s(9266),u=s(511),m=s(7377),x=s(6417);const j=function(){return(0,x.jsx)(m.Z,{header:"HarperDB Studio Is Being Updated",body:"Please check back in a few minutes and get ready for a whole new batch of awesome!"})};var Z=s(4220),f=s(6140),v=s(2227),w=s(2982),b=s(9476),g=s(1007),_=s(8978);var k=s(1337),y=s(8149),I=s(3295),A=s(6005);const z=(0,t.lazy)((()=>s.e(467).then(s.bind(s,2471)))),E=(0,t.lazy)((()=>s.e(150).then(s.bind(s,5313)))),S=(0,t.lazy)((()=>s.e(803).then(s.bind(s,3929)))),W=(0,t.lazy)((()=>s.e(58).then(s.bind(s,7661)))),P=(0,t.lazy)((()=>s.e(578).then(s.bind(s,4904)))),K=(0,t.lazy)((()=>Promise.all([s.e(409),s.e(26)]).then(s.bind(s,9924)))),C=(0,t.lazy)((()=>Promise.all([s.e(287),s.e(250)]).then(s.bind(s,1412)))),F=(0,t.lazy)((()=>Promise.all([s.e(287),s.e(228),s.e(926),s.e(620)]).then(s.bind(s,2829)))),N=(0,t.lazy)((()=>Promise.all([s.e(409),s.e(896)]).then(s.bind(s,5920)))),O=(0,t.lazy)((()=>Promise.all([s.e(409),s.e(845)]).then(s.bind(s,7875)))),T={timeout:0,position:l.m7.BOTTOM_CENTER};let B;function U(e){const{customer_id:n}=(0,a.UO)();return e.auth.orgs.some((e=>e.customer_id===n))?(0,x.jsx)(a.j3,{}):(0,x.jsx)(a.Fg,{to:"/organization",replace:!0})}const V=function(){const e=document.querySelector('link[rel="canonical"]'),n=(0,a.s0)(),s=(0,l.VY)(),V=(0,a.TH)(),{search:D,pathname:H}=V,{redirect:M}=c.Z.parse(D),R=(0,r.Kw)(p.Z,(e=>e.auth)),q=(0,r.Kw)(p.Z,(e=>e.theme)),Y=(0,r.Kw)(p.Z,(e=>e.products)),G=(0,r.Kw)(p.Z,(e=>e.regions)),J=(0,r.Kw)(p.Z,(e=>e.wavelengthRegions)),L=(0,r.Kw)(p.Z,(e=>e.akamaiRegions)),Q=(0,r.Kw)(p.Z,(e=>e.version)),X=(0,r.Kw)(p.Z,(e=>e.postmanCollection)),[$,ee]=(0,t.useState)(!0),[ne,se]=(0,t.useState)(!1),[te,ae]=(0,h.Z)({}),ie=null===R||void 0===R?void 0:R.user_id,re=ie&&-1===(null===R||void 0===R?void 0:R.email.indexOf("harperdb.io"))&&-1===(null===R||void 0===R?void 0:R.email.indexOf("deliciousmonster.com")),oe=(null===Q||void 0===Q?void 0:Q.maintenance)&&re;return i.ZP.initialize(u.Z.google_analytics_code),(0,t.useEffect)((()=>{i.ZP.send({hitType:"pageview",page:window.location.pathname+window.location.search})}),[V.pathname]),(0,t.useEffect)((()=>{(0,I.Z)(null===te||void 0===te?void 0:te.theme)}),[null===te||void 0===te?void 0:te.theme]),(0,t.useEffect)((()=>{se((e=>{let{apiVersion:n}=e;if(n){let e=!1;try{const s=u.Z.studio_version.split("."),t=n.split("."),a=parseInt(s[0],10)<parseInt(t[0],10),i=parseInt(s[0],10)===parseInt(t[0],10)&&parseInt(s[1],10)<parseInt(t[1],10),r=parseInt(s[0],10)===parseInt(t[0],10)&&parseInt(s[1],10)===parseInt(t[1],10)&&parseInt(s[2],10)<parseInt(t[2],10);(a||i||r)&&(e=n)}catch(s){return!1}return e}return!1})({apiVersion:Q.studio}))}),[Q.studio]),(0,t.useEffect)((()=>{null!==R&&void 0!==R&&R.email&&(window._kmq&&window._kmq.push(["identify",R.email]),null!==R&&void 0!==R&&R.update_password&&n("/update-password"),M&&n(M))}),[null===R||void 0===R?void 0:R.email]),(0,t.useEffect)((()=>{ne&&s.info("HarperDB Studio v".concat(ne," is now available. Refresh to update."),T)}),[ne]),(0,t.useEffect)((()=>{e.href=window.location.href}),[V,e]),(0,t.useEffect)((()=>{(0,k.Z)({currentPath:V.pathname,navigate:n,persistedUser:te,setPersistedUser:ae,setFetchingUser:ee,controller:B})}),[]),(0,o.Z)((()=>{Y||(0,v.Z)(),G||(0,w.Z)(),J||(0,b.Z)(),L||(0,A.Z)(),X||(0,_.Z)()}),u.Z.refresh_content_interval),(0,o.Z)((()=>{(0,g.Z)(),(0,y.Z)({auth:R,controller:B})}),u.Z.check_version_interval),(0,x.jsxs)("div",{className:"".concat(q," ").concat(u.Z.maintenance?"maintenance":""),children:[(0,x.jsxs)("div",{id:"app-container",children:[(0,x.jsx)(t.Suspense,{fallback:(0,x.jsx)(m.Z,{header:" ",spinner:!0}),children:(0,x.jsx)(z,{isMaintenance:oe,loggedIn:!0})}),$?(0,x.jsx)(m.Z,{header:"signing in",spinner:!0}):ie?(0,x.jsx)(d.SV,{FallbackComponent:Z.Z,children:(0,x.jsx)(t.Suspense,{fallback:(0,x.jsx)(m.Z,{header:" ",spinner:!0}),children:(0,x.jsxs)(a.Z5,{children:[(0,x.jsx)(a.AW,{element:oe?(0,x.jsx)(j,{}):(0,x.jsx)(P,{}),path:"/update-password"}),(0,x.jsx)(a.AW,{element:oe?(0,x.jsx)(j,{}):(0,x.jsx)(O,{}),path:"/profile/*"}),(0,x.jsxs)(a.AW,{element:oe?(0,x.jsx)(j,{}):(0,x.jsx)(U,{auth:R}),children:[(0,x.jsx)(a.AW,{element:(0,x.jsx)(N,{}),path:"/o/:customer_id/i/:compute_stack_id/*"}),(0,x.jsx)(a.AW,{element:(0,x.jsx)(F,{}),path:"/o/:customer_id/instances/:action?/:purchaseStep?"}),(0,x.jsx)(a.AW,{element:(0,x.jsx)(K,{}),path:"/o/:customer_id/*"})]}),(0,x.jsx)(a.AW,{element:oe?(0,x.jsx)(j,{}):(0,x.jsx)(C,{}),path:"/:list?/:action?"}),(0,x.jsx)(a.AW,{element:(0,x.jsx)(a.Fg,{to:"/",replace:!0})})]})})}):(0,x.jsx)(d.SV,{FallbackComponent:f.Z,children:(0,x.jsx)(t.Suspense,{fallback:(0,x.jsx)(m.Z,{header:" ",spinner:!0}),children:(0,x.jsxs)(a.Z5,{children:[(0,x.jsx)(a.AW,{element:(0,x.jsx)(S,{}),path:"/"}),(0,x.jsx)(a.AW,{element:u.Z.maintenance?(0,x.jsx)(j,{}):(0,x.jsx)(E,{}),path:"/sign-up"}),(0,x.jsx)(a.AW,{element:oe?(0,x.jsx)(j,{}):(0,x.jsx)(W,{}),path:"/reset-password"}),(0,x.jsx)(a.AW,{path:"*",element:(0,x.jsx)(a.Fg,{to:"/?redirect=".concat(H).concat(D),replace:!0})})]})})})]}),(0,x.jsx)("div",{id:"app-bg-color"}),(0,x.jsxs)("div",{className:"version",children:["HarperDB Studio v",u.Z.studio_version,Q.maintenance&&" - MAINTENANCE MODE"]})]})}}}]);