"use strict";(self.webpackChunkharperdb_studio=self.webpackChunkharperdb_studio||[]).push([[255],{9951:(e,s,a)=>{a.r(s),a.d(s,{default:()=>M});var t=a(7313),r=a(6782),l=a(5399),n=a(4122),i=a(238),c=a(3516),o=a(7387),d=a(9842),u=a(511),m=a(5447),h=a(9327),x=a(1842),g=a(6417);const p=function(e){let{totalRecords:s,loading:a,autoRefresh:t,setAutoRefresh:n,showFilter:i,filtered:c,setLastUpdate:o,toggleFilter:d,setShowChartModal:m}=e;return(0,g.jsxs)(r.Z,{className:"floating-card-header",children:[(0,g.jsxs)(l.Z,{xs:"12",md:"3",children:[(0,x.Z)(s)," record",1!==s?"s":""]}),(0,g.jsxs)(l.Z,{xs:"12",md:"9",className:"text-md-end",children:[(0,g.jsx)("br",{className:"d-block d-md-none"}),!u.Z.is_local_studio&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(h.Z,{id:"createChart",color:"link",title:"Create Chart",onClick:()=>m(!0),children:[(0,g.jsx)("i",{className:"fa fa-lg fa-chart-line"}),(0,g.jsx)("span",{className:"ms-2",children:"create chart"})]}),(0,g.jsx)("span",{className:"mx-3 text",children:"|"})]}),(0,g.jsx)(h.Z,{color:"link",title:"Refresh Results",className:"me-2",onClick:()=>o(Date.now()),children:(0,g.jsx)("i",{className:"fa ".concat(a?"fa-spinner fa-spin":"fa-sync-alt")})}),(0,g.jsxs)(h.Z,{color:"link",title:"Turn on autofresh",onClick:()=>n(!t),children:[(0,g.jsx)("span",{className:"me-2",children:"auto"}),(0,g.jsx)("i",{className:"fa fa-lg fa-toggle-".concat(t?"on":"off")})]}),(0,g.jsx)("span",{className:"mx-3 text",children:"|"}),(0,g.jsx)(h.Z,{color:"link",title:"Filter Results",className:"me-2",onClick:()=>d({filtered:i?[]:c,page:0,showFilter:!i}),children:(0,g.jsx)("i",{className:"fa fa-search"})})]})]})};var j=a(1446),b=a(2020),f=a(8642),y=a(1781),N=a(8212),v=a(8446),Z=a(8467),C=a(6160),k=a(6449),_=a(576);var S=a(9356);const w=[{type:"line"},{type:"bar"},{type:"area"},{type:"radar"},{type:"pie",singleSeriesAttribute:!0},{type:"donut",singleSeriesAttribute:!0},{type:"single value",singleSeriesAttribute:!0}];var q=a(3262);const A=function(e){var s,a;let{setShowChartModal:n,tableData:d,query:u}=e;const{compute_stack_id:m,customer_id:x}=(0,Z.UO)(),p=(0,C.VY)(),[A,P]=(0,t.useState)({customer_id:x,compute_stack_id:m,name:!1,type:"line",query:u,labelAttribute:!1,seriesAttributes:[],shared:!1}),[F,z]=(0,t.useState)(!1),R=(0,o.Kw)(k.Z,(e=>e.auth)),O=(0,o.Kw)(k.Z,(e=>e.theme)),E=Object.keys(d[0]),D=[...A.seriesAttributes,A.labelAttribute,"__createdtime__","__updatedtime__"],T="single value"===A.type?null===(s=A.seriesAttributes)||void 0===s?void 0:s.length:A.type&&(null===(a=A.seriesAttributes)||void 0===a?void 0:a.length)&&A.labelAttribute,B="single value"===A.type?A.seriesAttributes.length&&A.name:A.type&&A.labelAttribute&&A.seriesAttributes.length&&A.name,Q=w.map((e=>e.singleSeriesAttribute&&e.type)).includes(A.type),L=(0,S.Z)({title:A.name||"chart name",type:A.type,labels:d.map((e=>e[A.labelAttribute])),theme:O}),M=Q?d.map((e=>e[A.seriesAttributes[0]])):A.seriesAttributes.map((e=>({name:e,data:d.map((s=>s[e]))})));return(0,g.jsxs)(j.Z,{id:"chart-modal",size:"lg",isOpen:!0,toggle:()=>n(!1),className:O,centered:!0,fade:!1,children:[(0,g.jsx)(b.Z,{toggle:()=>n(!1),children:"Create Chart From This Query Data"}),(0,g.jsxs)(f.Z,{children:[(0,g.jsxs)(r.Z,{children:[(0,g.jsx)(l.Z,{xs:"12",className:"py-2 query-text",children:(0,g.jsx)("i",{children:u})}),(0,g.jsx)(l.Z,{xs:"12",children:(0,g.jsx)("hr",{className:"my-2"})}),(0,g.jsx)(l.Z,{lg:"4",children:(0,g.jsx)(N.ZP,{className:"react-select-container limited-height",classNamePrefix:"react-select",onChange:e=>{let{value:s}=e;return(e=>{const s=w.find((s=>s.type===e)).singleSeriesAttribute!==w.find((e=>e.type===A.type)).singleSeriesAttribute;P(s?{...A,labelAttribute:!1,seriesAttributes:[],type:e}:{...A,type:e})})(s)},options:w.map((e=>({label:"".concat(e.type),value:e.type}))),value:{label:"chart type: ".concat(A.type),value:A.type},isSearchable:!1,isClearable:!1,placeholder:"Chart Type",styles:{placeholder:e=>({...e,textAlign:"center",width:"100%",color:"#BCBCBC"})}})}),(0,g.jsx)(l.Z,{xs:"12",className:"d-block d-lg-none",children:(0,g.jsx)("hr",{className:"my-2"})}),(0,g.jsx)(l.Z,{lg:"4",children:(0,g.jsx)(N.ZP,{className:"react-select-container limited-height",classNamePrefix:"react-select",onChange:e=>{let{value:s}=e;return a=s,P({...A,seriesAttributes:Q?[a]:[...A.seriesAttributes,a]});var a},options:E.filter((e=>!D.includes(e))).sort().map((e=>({label:e,value:e}))),value:Q&&A.seriesAttributes.length?{label:"data column: ".concat(A.seriesAttributes[0]),value:A.seriesAttributes[0]}:null,isSearchable:!1,isClearable:!1,isDisabled:!A.type,placeholder:"".concat(Q?"select":"add"," data column"),styles:{placeholder:e=>({...e,textAlign:"center",width:"100%",color:"#BCBCBC"})}})}),(0,g.jsx)(l.Z,{lg:"4",children:"single value"!==A.type&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("hr",{className:"d-block d-lg-none my-2"}),(0,g.jsx)(N.ZP,{className:"react-select-container limited-height",classNamePrefix:"react-select",onChange:e=>{let{value:s}=e;return a=s,P({...A,labelAttribute:a});var a},options:E.filter((e=>!["__createdtime__","__updatedtime__"].includes(e))).sort().map((e=>({label:e,value:e}))),value:A.labelAttribute?{label:"".concat(Q?"label":"x-axis",": ").concat(A.labelAttribute),value:A.labelAttribute}:null,isSearchable:!1,isClearable:!1,isDisabled:!A.type,placeholder:"select ".concat(Q?"label":"x-axis"," column"),styles:{placeholder:e=>({...e,textAlign:"center",width:"100%",color:"#BCBCBC"})}})]})}),(0,g.jsx)(l.Z,{xs:"12",children:(0,g.jsx)("hr",{className:"my-2"})}),(0,g.jsx)(l.Z,{lg:"4",children:(0,g.jsx)(y.Z,{id:"chart_name",type:"text",placeholder:"chart name",onChange:e=>P({...A,name:e.target.value})})}),(0,g.jsx)(l.Z,{xs:"12",className:"d-block d-lg-none",children:(0,g.jsx)("hr",{className:"my-2"})}),(0,g.jsxs)(l.Z,{lg:"4",className:"py-2 text-nowrap d-flex justify-content-center align-items-center",children:[(0,g.jsx)(h.Z,{className:"me-2",color:"link",onClick:()=>P({...A,shared:!A.shared}),children:(0,g.jsx)("i",{className:"fa fa-lg text-purple fa-toggle-".concat(A.shared?"on":"off")})}),"visible to all org users"]}),(0,g.jsx)(l.Z,{xs:"12",className:"d-block d-lg-none",children:(0,g.jsx)("hr",{className:"my-2"})}),(0,g.jsx)(l.Z,{lg:"4",children:(0,g.jsx)(h.Z,{onClick:async()=>{z(!0);const e=await(async e=>{let{auth:s,customer_id:a,compute_stack_id:t,name:r,type:l,query:n,labelAttribute:i,seriesAttributes:c,shared:o}=e;return(0,_.Z)({endpoint:"addChart",method:"POST",auth:s,payload:{user_id:s.user_id,customer_id:a,compute_stack_id:t,name:r,type:l,query:n,labelAttribute:i,seriesAttributes:c,shared:o}})})({auth:R,...A});e.error?(p.error(e.message),z(!1)):(p.success(e.message),n(!1))},block:!0,disabled:!B||F,color:"success",children:F?(0,g.jsx)("i",{className:"fa fa-spin fa-spinner"}):(0,g.jsx)("span",{children:"Add Chart"})})})]}),!Q&&A.seriesAttributes.length?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("hr",{className:"my-2"}),(0,g.jsx)("div",{className:"",children:A.seriesAttributes.map((e=>(0,g.jsxs)(h.Z,{color:"danger",size:"sm",className:"me-2",onClick:()=>(e=>{const s=A.seriesAttributes.indexOf(e);A.seriesAttributes.splice(s,1),P({...A,seriesAttributes:A.seriesAttributes})})(e),children:["[x] ",e]},e)))})]}):null,(0,g.jsx)("hr",{className:"my-2"}),(0,g.jsx)("div",{className:"chart-holder",children:T&&"single value"===A.type?(0,g.jsx)(i.Z,{children:(0,g.jsxs)(c.Z,{className:"single-value-chart",children:[(0,g.jsx)("div",{className:"title",children:A.name||"chart name"}),(0,g.jsx)("h1",{children:(0,q.Z)(M[0])?M[0].toFixed(2):M[0]})]})}):T?(0,g.jsx)(v.Z,{options:L,series:M,type:A.type,height:220}):(0,g.jsxs)("div",{className:"text-center py-5 text-grey",children:["please choose chart ",!A.type&&"type, ","label and data"]})})]})]})};var P=a(6512);const F=function(e){let{message:s,loading:a=!1,error:t=!1,accessErrors:r=!1,cancel:l=!1}=e;const n=r&&r.filter((e=>"table"===e.type)),o=r&&r.filter((e=>"attribute"===e.type));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"floating-card-header",children:"\xa0"}),(0,g.jsx)(i.Z,{className:"my-3",children:(0,g.jsx)(c.Z,{children:(0,g.jsxs)("div",{className:"empty-prompt",children:[(0,g.jsxs)("div",{className:"mb-2",children:["\xa0",a&&(0,g.jsx)("i",{className:"fa fa-spinner fa-spin"}),"\xa0"]}),s&&(0,g.jsxs)("div",{className:"mb-2 ".concat(t?"text-danger":""),children:["\xa0",s,"\xa0"]}),a&&l&&(0,g.jsx)(h.Z,{color:"danger",size:"sm",className:"px-3",onClick:l,children:"cancel query"}),t&&n&&n.length?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("hr",{className:"my-4"}),(0,g.jsx)("ul",{children:n.map((e=>(0,g.jsxs)("li",{className:"mb-2",children:[e.schema," > ","attribute"===e.type&&(0,g.jsxs)("span",{children:[e.table," >"]})," ",(0,g.jsx)("b",{children:e.entity}),": ",e.type," requires ",(0,g.jsx)("b",{children:e.permission})," permissions"]},"".concat(e.schema).concat(e.table).concat(e.entity).concat(e.permission))))}),(0,g.jsx)("hr",{})]}):null,t&&o&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("hr",{className:"my-4"}),(0,g.jsx)("ul",{children:o.map((e=>(0,g.jsxs)("li",{className:"mb-2",children:[e.schema," > ","attribute"===e.type&&(0,g.jsxs)("span",{children:[e.table," >"]})," ",(0,g.jsx)("b",{children:e.entity}),": ",e.type," requires ",(0,g.jsx)("b",{children:e.permission})," permissions"]},"".concat(e.schema).concat(e.table).concat(e.entity).concat(e.permission))))})]})]})})})]})};var z=a(4220),R=a(2261),O=a(6855);const E={tableData:!1,totalRecords:0,dataTableColumns:[],filtered:[],sorted:[],page:0,totalPages:1,pageSize:20,autoRefresh:!1,showFilter:!1,lastUpdate:!1};let D;const T=function(e){var s;let{query:a}=e;const[r,l]=(0,t.useState)(),h=(0,o.Kw)(m.Z,(e=>e.auth)),x=(0,o.Kw)(m.Z,(e=>e.url)),[j,b]=(0,t.useState)(E),[f,y]=(0,t.useState)(!1),[N,v]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{let e=!0;return(async()=>{if(a.query&&a.lastUpdate){D&&D.abort(),D=new AbortController,v(!0);const t=await(async e=>{let{query:s,auth:a,url:t,signal:r}=e;try{const e=await(0,P.Z)({sql:s,auth:a,url:t,signal:r});if(e.error)return{message:e.message,error:!0,access_errors:e.access_errors};if(e.message)return{message:e.message};const l=e.length,n=l?Object.keys(e[0]):[],i=n.filter((e=>!["__createdtime__","__updatedtime__"].includes(e))).sort();return n.includes("__createdtime__")&&i.push("__createdtime__"),n.includes("__updatedtime__")&&i.push("__updatedtime__"),{tableData:e,totalRecords:l,dataTableColumns:i.map((e=>({Header:e.toString(),accessor:s=>s[e.toString()]})))}}catch(l){return{message:l,error:!0}}})({query:a.query.replace(/\n/g," ").trim(),auth:h,url:x,signal:D.signal});if(v(!1),t.error&&"Aborted"===t.message)b({...j,message:"query canceled, please execute a new query to proceed",error:!1});else if(t.error)b({...j,message:"error fetching data: ".concat(t.message),access_errors:t.access_errors,error:!0});else if(t.message)b({...j,message:t.message,error:!1});else if(e){var s;b({...j,...t,totalPages:Math.ceil(((null===(s=t.tableData)||void 0===s?void 0:s.length)||20)/20),error:!1,message:!t.totalRecords&&"no records matched your query",sorted:[]})}}})(),()=>{var s;null===(s=D)||void 0===s||s.abort(),e=!1}}),[a,r]),(0,t.useEffect)((()=>{b(E)}),[a.query]),(0,n.Z)((()=>{j.autoRefresh&&!N&&l(Date.now())}),u.Z.refresh_content_interval),N||j.message||j.access_errors?(0,g.jsx)(F,{error:j.error,accessErrors:j.access_errors,loading:N,message:!N&&j.message,cancel:()=>{D&&D.abort(),b(E),v(!1)}}):null!==(s=j.tableData)&&void 0!==s&&s.length?(0,g.jsxs)(d.SV,{onError:(e,s)=>(0,R.Z)({error:{message:e.message,componentStack:s}}),FallbackComponent:z.Z,children:[(0,g.jsx)(p,{totalRecords:j.totalRecords,loading:N,showFilter:j.showFilter,filtered:j.filtered,toggleFilter:e=>b({...j,...e}),autoRefresh:j.autoRefresh,setAutoRefresh:()=>b({...j,autoRefresh:!j.autoRefresh}),setLastUpdate:l,setShowChartModal:y}),(0,g.jsx)(i.Z,{className:"my-3",children:(0,g.jsx)(c.Z,{className:"react-table-holder",children:(0,g.jsx)(O.Z,{columns:j.dataTableColumns||[],data:j.tableData||[],currentPage:j.page,pageSize:j.pageSize,totalPages:j.totalPages,showFilter:j.showFilter,sorted:j.sorted,loading:N&&!j.autoRefresh,onFilteredChange:e=>b({...j,filtered:e}),onSortedChange:e=>b({...j,sorted:e}),onPageChange:e=>b({...j,pageSize:e}),onPageSizeChange:e=>b({...j,page:0,pageSize:e})})})}),f&&(0,g.jsx)(A,{setShowChartModal:y,tableData:j.tableData,query:a.query.replace(/\n/g," ").trim()})]}):(0,g.jsx)(F,{message:"please execute a SQL query to proceed"})};const B=function(e){let{setQuery:s,query:a}=e;const[n,o]=(0,t.useState)(""),[u,m]=(0,t.useState)(!1),x=(0,t.createRef)();return(0,t.useEffect)((()=>{a&&(m({submitted:!1}),o(a.query||a),x.current.focus())}),[a]),(0,t.useEffect)((()=>{const e=n,a=e.length?e.replace(/[\t\n\r]/gm,""):"";u.submitted&&a.length?(s({lastUpdate:Date.now(),query:n.trim()}),o(n.trim()),m({submitted:!1})):u.submitted&&(o(""),m({submitted:!1}))}),[u]),(0,g.jsx)(d.SV,{onError:(e,s)=>(0,R.Z)({error:{message:e.message,componentStack:s}}),FallbackComponent:z.Z,children:(0,g.jsxs)("div",{id:"query-window",children:[(0,g.jsx)("span",{className:"floating-card-header",children:"sql query"}),(0,g.jsx)(i.Z,{className:"mt-3 mb-4",children:(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(y.Z,{id:"sql_query",type:"textarea",className:"sql-query-textarea",value:n,onKeyDown:e=>{"Enter"===e.code&&e.metaKey?m({submitted:!0}):"Tab"===e.code&&(e.preventDefault(),document.execCommand("insertHTML",!1,"&#009"))},onChange:e=>o(e.target.value)}),(0,g.jsxs)(r.Z,{children:[(0,g.jsx)(l.Z,{children:(0,g.jsx)(h.Z,{color:"grey",title:"clear query",block:!0,className:"mt-2",onClick:()=>{s(!1),o("")},children:"Clear"})}),(0,g.jsx)(l.Z,{children:(0,g.jsx)(h.Z,{id:"executeQuery",innerRef:x,title:"execute query",color:"success",block:!0,className:"mt-2",onClick:()=>m({submitted:!0}),children:"Execute"})})]})]})})]})})};const Q=(0,a(8131).Z)("instanceQueries");const L=function(e){var s;let{setQuery:a,query:n}=e;const{compute_stack_id:o}=(0,Z.UO)(),[u,m]=Q({});return(0,t.useEffect)((()=>{if(n.lastUpdate){var e;const s=u&&(null===(e=u[o])||void 0===e?void 0:e.filter((e=>e.query.toLowerCase()!==n.query.toLowerCase())))||[];s.unshift(n),m({...u,[o]:s})}}),[n]),(0,g.jsx)(d.SV,{onError:(e,s)=>(0,R.Z)({error:{message:e.message,componentStack:s}}),FallbackComponent:z.Z,children:(0,g.jsxs)("div",{id:"query-history",children:[(0,g.jsxs)(r.Z,{className:"floating-card-header",children:[(0,g.jsx)(l.Z,{xs:"9",children:"query history (click to load)"}),(0,g.jsx)(l.Z,{xs:"3",className:"text-end",children:(0,g.jsx)(h.Z,{color:"link",title:"Refresh Results",className:"me-2",onClick:()=>m({...u,[o]:[]}),children:(0,g.jsx)("i",{className:"fa fa-trash"})})})]}),(0,g.jsx)(i.Z,{className:"my-3",children:u&&null!==(s=u[o])&&void 0!==s&&s.length?(0,g.jsx)(c.Z,{className:"query-scroller",children:u[o].map(((e,s)=>(0,g.jsxs)(t.Fragment,{children:[(0,g.jsx)("button",{id:"loadQuery".concat(s),type:"button",tabIndex:"0",title:"Load query: ".concat(e.query),className:"past-query",onClick:()=>a(e.query),children:(0,g.jsx)("span",{children:e.query})}),(0,g.jsx)("hr",{className:"my-0"})]},e.query)))}):(0,g.jsx)(c.Z,{className:"text-center text-grey",children:"no queries yet"})})]})})};const M=function(){const[e,s]=(0,t.useState)(!1);return(0,g.jsxs)(r.Z,{id:"query",children:[(0,g.jsxs)(l.Z,{xl:"3",lg:"4",md:"5",xs:"12",children:[(0,g.jsx)(B,{setQuery:s,query:e}),(0,g.jsx)(L,{setQuery:s,query:e})]}),(0,g.jsx)(l.Z,{xl:"9",lg:"8",md:"7",xs:"12",children:(0,g.jsx)(T,{query:e})})]})}},6855:(e,s,a)=>{a.d(s,{Z:()=>y});var t=a(7313),r=a(5110),l=a(1781),n=a(9842),i=a(6782),c=a(5399),o=a(6417);const d=e=>{let{headerGroups:s,onSortedChange:a,sorted:t,showFilter:r}=e;return s.map((e=>(0,o.jsxs)("div",{...e.getHeaderGroupProps(),children:[(0,o.jsx)(i.Z,{className:"header g-0",children:e.headers.map((e=>{var s,r;return(0,o.jsx)(c.Z,{onClick:()=>{var s,r;return a([{id:e.id,desc:(null===(s=t[0])||void 0===s?void 0:s.id)===e.id&&!(null!==(r=t[0])&&void 0!==r&&r.desc)}])},className:"".concat((null===(s=t[0])||void 0===s?void 0:s.id)===e.id?"sorted":""," ").concat(null!==(r=t[0])&&void 0!==r&&r.desc?"desc":"asc"," ").concat(-1!==e.id.indexOf("hdb-narrow")?"action":""," px-1"),children:(0,o.jsx)("div",{className:"text-renderer",children:e.render("Header")})},e.id)}))}),r&&(0,o.jsx)(i.Z,{className:"filter g-0",children:e.headers.map((e=>(0,o.jsx)(c.Z,{className:-1!==e.id.indexOf("hdb-narrow")?"action":"",children:e.render("Filter")},e.id)))})]})))};var u=a(9327);const m=function(e){let{page:s,pageSize:a,totalPages:t,onPageChange:r,onPageSizeChange:n,loading:d}=e;return(0,o.jsxs)(i.Z,{className:"pagination",children:[(0,o.jsx)(c.Z,{xs:"12",sm:"2",className:"previous",children:(0,o.jsx)(u.Z,{className:"mb-2 btn-pagination",color:"purple",block:!0,onClick:()=>r(s-1),disabled:!t||0===s,children:(0,o.jsx)("i",{className:"fa fa-chevron-left"})})}),(0,o.jsxs)(c.Z,{xs:"12",sm:"4",className:"paginator",children:[(0,o.jsx)("i",{className:"fa fa-book me-2"}),(0,o.jsx)(l.Z,{className:"mb-2",type:"number",value:s+1,min:1,max:t,onChange:e=>r(e.target.value-1)}),(0,o.jsxs)("div",{className:"page-count",children:["\xa0/\xa0",d?(0,o.jsx)("i",{className:"fa fa-spinner fa-spin"}):t]})]}),(0,o.jsx)(c.Z,{xs:"12",sm:"4",className:"page-size",children:(0,o.jsx)(l.Z,{className:"mb-2",type:"select",value:a,onChange:e=>n(e.target.value),children:[20,50,100,250].map((e=>(0,o.jsxs)("option",{value:e,children:[e," rows"]},e)))})}),(0,o.jsx)(c.Z,{xs:"12",sm:"2",className:"next",children:(0,o.jsx)(u.Z,{className:"mb-2 pull-right btn-pagination",block:!0,color:"purple",onClick:()=>r(s+1),disabled:!t||s+1===t,children:(0,o.jsx)("i",{className:"fa fa-chevron-right"})})})]})};const h=function(e){let{previousPage:s,canPreviousPage:a,pageIndex:t,gotoPage:r,setPageSize:n,pageCount:d,nextPage:m,canNextPage:h,loading:x}=e;return(0,o.jsxs)(i.Z,{className:"pagination",children:[(0,o.jsx)(c.Z,{xs:"12",sm:"2",className:"previous",children:(0,o.jsx)(u.Z,{className:"mb-2 btn-pagination",color:"purple",block:!0,onClick:s,disabled:!d||!a,children:(0,o.jsx)("i",{className:"fa fa-chevron-left"})})}),(0,o.jsxs)(c.Z,{xs:"12",sm:"4",className:"paginator",children:[(0,o.jsx)("i",{className:"fa fa-book me-2"}),(0,o.jsx)(l.Z,{className:"mb-2",type:"number",value:t+1||1,min:1,max:d,onChange:e=>r(e.target.value?Number(e.target.value)-1:0)}),(0,o.jsxs)("div",{className:"page-count",children:["\xa0/\xa0",x?(0,o.jsx)("i",{className:"fa fa-spinner fa-spin"}):d]})]}),(0,o.jsx)(c.Z,{xs:"12",sm:"4",className:"page-size",children:(0,o.jsx)(l.Z,{className:"mb-2",type:"select",onChange:e=>{r(0),setTimeout((()=>n(e.target.value)),1e3)},children:[20,50,100,250].map((e=>(0,o.jsxs)("option",{value:e,children:[e," rows"]},e)))})}),(0,o.jsx)(c.Z,{xs:"12",sm:"2",className:"next",children:(0,o.jsx)(u.Z,{className:"mb-2 pull-right btn-pagination",block:!0,color:"purple",onClick:m,disabled:!d||!h,children:(0,o.jsx)("i",{className:"fa fa-chevron-right"})})})]})};const x=function(e){let{prepareRow:s,row:a,onRowClick:t=!1}=e;return s(a),(0,o.jsx)(i.Z,{onClick:()=>t&&t(a.original),className:"g-0",children:a.cells.map((e=>(0,o.jsx)(c.Z,{className:-1!==e.column.id.indexOf("hdb-narrow")?"action":"",children:e.render("Cell")},"".concat(e.row.id,"-").concat(e.column.id))))})};var g=a(2261),p=a(4220);function j(e){let{value:s}=e;return(0,o.jsx)("div",{className:"text-renderer",children:s})}function b(e){let{src:s}=e;const[a,r]=(0,t.useState)(!1),[l,n]=(0,t.useState)(!1);return(0,o.jsxs)("div",{className:"image-renderer",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,o.jsx)("i",{className:"fa fa-image"}),a&&l?(0,o.jsxs)("div",{className:"preview-image no-image",children:[(0,o.jsx)("i",{className:"fa fa-ban text-danger"}),(0,o.jsx)("div",{className:"mt-2",children:"image failed to load"})]}):a?(0,o.jsx)("img",{onError:n,alt:s,src:s,className:"preview-image"}):null]})}const f={Filter:e=>{let{column:{filterValue:s,setFilter:a}}=e;return(0,o.jsx)(l.Z,{type:"text",value:s||"",onChange:e=>a(e.target.value||void 0)})},Cell:e=>{let{value:s}=e;return(e=>{switch(Object.prototype.toString.call(e)){case"[object Array]":case"[object Object]":return(0,o.jsx)(j,{value:JSON.stringify(e)});case"[object Boolean]":return(0,o.jsx)(j,{value:e?"true":"false"});case"[object String]":return(s=e)&&(s.match(/^https?.*\.(jpeg|jpg|gif|png)$/)||-1!==s.indexOf("data:image"))?(0,o.jsx)(b,{src:e}):(0,o.jsx)(j,{value:e});default:return(0,o.jsx)(j,{value:e})}var s})(s)}};const y=function(e){let{columns:s,data:a,currentPage:l,pageSize:i,totalPages:c,onFilteredChange:u,onSortedChange:j,onPageChange:b,onPageSizeChange:y,showFilter:N,onRowClick:v,sorted:Z,loading:C,manual:k=!1}=e;const{headerGroups:_,page:S,rows:w,prepareRow:q,state:A,setAllFilters:P,canPreviousPage:F,canNextPage:z,pageOptions:R,pageCount:O,gotoPage:E,nextPage:D,previousPage:T,setPageSize:B}=(0,r.useTable)({columns:s,data:a,defaultColumn:f,onFilteredChange:u,onSortedChange:j,onPageChange:b,onPageSizeChange:y,onRowClick:v,manualPagination:k,manualFilters:k,initialState:{pageIndex:l,pageSize:i}},r.useFilters,r.usePagination),[Q,L]=(0,t.useState)(!0),M=k||!S.length?w:S;return(0,t.useEffect)((()=>{!N&&A.filters.length?P([]):u(A.filters)}),[A.filters,N]),(0,t.useEffect)((()=>{setTimeout((()=>L(!1)),100)}),[null===M||void 0===M?void 0:M.length]),(0,o.jsxs)(n.SV,{onError:(e,s)=>(0,g.Z)({error:{message:e.message,componentStack:s}}),FallbackComponent:p.Z,children:[(0,o.jsxs)("div",{className:"react-table-scroller",children:[(0,o.jsx)(d,{headerGroups:_,onSortedChange:j,sorted:Z,showFilter:N}),C||Q?(0,o.jsx)("div",{className:"centered text-center",children:(0,o.jsx)("i",{className:"fa fa-spinner fa-spin"})}):M.length?M.map((e=>(0,o.jsx)(x,{row:e,prepareRow:q,onRowClick:v},e.id))):(0,o.jsxs)("div",{className:"centered text-center",children:[(0,o.jsx)("i",{className:"fa fa-exclamation-triangle text-danger"}),(0,o.jsx)("div",{className:"mt-2 text-darkgrey",children:"no records"})]})]}),k?(0,o.jsx)(m,{page:l,pageSize:i,totalPages:c,onPageChange:b,onPageSizeChange:y,loading:C}):(0,o.jsx)(h,{previousPage:T,pageSize:i,canPreviousPage:F,pageIndex:A.pageIndex,pageOptions:R,gotoPage:E,setPageSize:B,pageCount:O,nextPage:D,canNextPage:z,loading:C})]})}},6512:(e,s,a)=>{a.d(s,{Z:()=>r});var t=a(9859);const r=async e=>{let{auth:s,url:a,sql:r,signal:l}=e;return(0,t.Z)({operation:{operation:"sql",sql:r},auth:s,url:a,signal:l})}},9356:(e,s,a)=>{a.d(s,{Z:()=>t});const t=e=>{let{title:s,type:a,labels:t,theme:r}=e;const l="light"===r?"#696969":"dark"===r?"#fff":"#212121";return{title:{text:s,style:{color:l}},chart:{type:a,animations:{enabled:!1},fontFamily:"Arial, Helvetica, Verdana, Sans-Serif",toolbar:{offsetX:-25,tools:{selection:!1,pan:!1,zoom:!1,zoomin:!1,zoomout:!1,reset:!1}}},labels:t,theme:{palette:"palette10"},plotOptions:{pie:{offsetY:10}},legend:{offsetY:5,labels:{colors:l}},markers:{size:[4],strokeColors:"dark"===r?"#212121":"#fff",strokeWidth:1,strokeOpacity:"dark"===r?.5:1,hover:{sizeOffset:0}},xaxis:{labels:{rotate:-60,maxHeight:80,style:{fontSize:"10px",colors:l}},tooltip:{enabled:!1}},yaxis:{labels:{style:{fontSize:"10px",colors:l}}}}}},3262:(e,s,a)=>{a.d(s,{Z:()=>t});const t=e=>!Number.isNaN(parseFloat(e))&&Number.isFinite(parseFloat(e))}}]);